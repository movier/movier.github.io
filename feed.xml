<?xml version="1.0" encoding="utf-8" ?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Oli Movie R]]></title>
  <subtitle><![CDATA[Hi, I’m Oliver and welcome to my personal website. I write about programming, travelling and life here.]]></subtitle>
  <link href="https://olimovier.com/feed.xml" rel="self"></link>
  <link href="https://olimovier.com/"></link>
  <updated>2022-09-15T05:01:56Z</updated>
  <id>https://olimovier.com/</id>
  <entry>
    <title><![CDATA[ Set up a Second Server for V2Ray ]]></title>
    <link href="https://olimovier.com/blog/2021/set-up-a-second-server-for-v2ray/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2021-06-06T20:44:41Z</updated>
    <published>2021-06-06T20:35:05Z</published>
    <id>https://olimovier.com/blog/2021/set-up-a-second-server-for-v2ray/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>Even you set up the V2Ray correctly and cross GFW successfully, you will probably suffer low speed and high legacy. If you try to <code>ping</code> your server abroad, you will find the packet loss rate is high.</p>
<p>In order to explain the reason for that, I need to clarify one thing which is about network bandwidth in China. Let&#39;s say the bandwidth at your home is 1Gbps which seems super fast, but it&#39;s domestic only. All the data crossing the GFW uses the international bandwidth which is very limited in China. So 1Gbps domestic bandwidth doesn&#39;t mean anything to your experience of crossing the GFW. What we really need is a reliable network connection between your ISP and server abroad.</p>
<p>Here I choose the NAT from <a href="https://www.cloudiplc.com/">CloudIPLC</a>. To be specific, the network it uses connects directly from Shanghai with Japan, and my server abroad is exactly in Japan. That&#39;s exactly what I need. Although the price is not cheap, but in order to get the reliable network connection, I think it&#39;s worth the price.</p>
<p>The process of setting up V2Ray on the NAT server is almost the same as that on the server abroad. You just need to modify the configuration file. Here is the configuration file I use on the NAT server.</p>
<pre><code class="lang-json">{
    &quot;log&quot;: {
        &quot;access&quot;: &quot;/var/log/v2ray/access.log&quot;,
        &quot;error&quot;: &quot;/var/log/v2ray/error.log&quot;,
        &quot;loglevel&quot;: &quot;warning&quot;
    },
    &quot;inbounds&quot;: [
        {
            &quot;port&quot;: 13228,
            &quot;protocol&quot;: &quot;vmess&quot;,
            &quot;settings&quot;: {
                &quot;clients&quot;: [
                    {
                        &quot;id&quot;: &quot;738b9584-82cd-40a6-810d-25b3c2133961&quot;,
                        &quot;level&quot;: 1,
                        &quot;alterId&quot;: 32
                    }
                ]
            }
        }
    ],
    &quot;outbounds&quot;: [
        {
            &quot;protocol&quot;: &quot;vmess&quot;,
            &quot;settings&quot;: {
                &quot;vnext&quot;: [
                    {
                        &quot;address&quot;: &quot;8.8.8.8&quot;,
                        &quot;port&quot;: 10086,
                        &quot;users&quot;: [
                            {
                                &quot;id&quot;: &quot;738b9584-82cd-40a6-810d-25b3c2133961&quot;
                            }
                        ]
                    }
                ]
            }
        },
        {
            &quot;protocol&quot;: &quot;blackhole&quot;,
            &quot;settings&quot;: {},
            &quot;tag&quot;: &quot;block&quot;
        },
        {
            &quot;protocol&quot;: &quot;freedom&quot;,
            &quot;tag&quot;: &quot;direct&quot;,
            &quot;settings&quot;: {}
        }
    ]
}
</code></pre>
<p>Replace the value of port and client id in inbounds (will be used by client devices), address, port and client id in outbounds (from your server abroad). That&#39;s all. Restart V2Ray to make the new configuration file work.</p>
<p>In terms of configuration of client devices, just replace the value of address, port and client id with the value from inbounds above.</p>
<p>Detailed information could be found on <a href="https://gist.github.com/movier/b702f598dc52fce7dfc93d39d5fd0191">my gist</a>. Hopefull it will improve your experience of crossing GFW.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Turn Any Phone into a IC Card ]]></title>
    <link href="https://olimovier.com/blog/2021/turn-any-phone-into-a-ic-card/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2021-04-13T07:07:39Z</updated>
    <published>2021-04-13T06:37:35Z</published>
    <id>https://olimovier.com/blog/2021/turn-any-phone-into-a-ic-card/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>Recently I moved to a new office which requires a IC card as access control. Wherever I go, I need to bring it, otherwise I can&#39;t enter the office. It&#39;s really inconvenient.</p>
<p>So I was thinking if I could simulate the IC card using my phone. I did some search on the Internet. It turned out to be possible for some specific Android phones, such as some Xiaomi phones. But mine is iPhone, although Apple released some NFC related API, it&#39;s still not enough.</p>
<p>Using my iPhone as a IC card seems impossible. Is there any alternative? The answer is <strong>YES</strong>. I found there is a kind of NFC tag which is small and could stick to the phone. Most importantly the data it contains could be customized. So the new solution is to copy the data from the original card to the tiny NFC sticker. You can have a distinct comparison about their sizes from the image below.</p>
<p><img src="/images/shrink-your-ic-card.jpg" alt="Original IC card, Tiny NFC Tag and my iPhone 7"></p>
<h2 id="hardwares">Hardwares</h2>
<p>There are three things which are necessary in this project.</p>
<ul>
<li>The original IC card</li>
<li>An Android phone with NFC</li>
<li>The tiny NFC sticker (you can buy it later after you confirm your original IC card is not encrypted)</li>
</ul>
<h2 id="software">Software</h2>
<p>There is only one app you need to install on your Android phone, which is <a href="https://play.google.com/store/apps/details?id=de.syss.MifareClassicTool&amp;hl=en_US&amp;gl=US">MIFARE Classic Tool</a>.</p>
<p><img src="/images/mifare-classic-tool-app-icon.png" alt="MIFARE Classic Tool App Icon"></p>
<h2 id="detect-your-original-ic-card">Detect your original IC card</h2>
<p>After your install the app, open it and put your original IC card near the NFC sensor on your Android phone. It will detect it automatically. If you feel the vibration and see a popup message displaying something like <strong>New tag found (UID: DED358AA)</strong>. Congratulations. Your IC card is possible to copy. You can also learn some basic information about it by clicking <em>TOOLS -&gt; Display Tag Info</em>.</p>
<p><img src="/images/tag-info.png" alt="Tag Info"></p>
<h2 id="read-data-from-your-original-ic-card">Read data from your original IC card</h2>
<p>By clicking <em>READ TAG</em> and select all the key files, it&#39;s time to read your tag. Also put your card near the NFC sensor and click <em>START MAPPING AND READ TAG</em>. If everything goes well, you should see a <em>Dump Editor</em> which is divided into 16 sections. Each section contains the corresponding data. Please confirm all data from the 16 sections are read successfully. If any of them can&#39;t be read, it&#39;s probably encrypted, which means it&#39;s impossible to copy it. After that, you can save the file for later use.</p>
<p><img src="/images/dump-editor.png" alt="Tag Info"></p>
<p>In my case, except sector 0, there is no data in other sectors. So I guess it is the UID in sector 0 which is used by the access control system.</p>
<h2 id="write-data-into-the-tiny-nfc-sticker">Write data into the tiny NFC sticker</h2>
<p>After you buy the tiny NFC sticker, you can write the data from your original IC card into it. In the app, click <em>WRITE TAG</em> and choose <em>Write Dump (Clone)</em>. Check <em>Show Options</em> and then check <em>Advanced: Enable writing to manufacturer block</em>. And then click <em>SELECT DUMP</em>, choose the dump file you saved before and click <em>SELECT DUMP</em> button. In the popup window, select all the sectors. Finally click <em>OK</em> button. Don&#39;t forget to put your tiny NFC sticker near the NFC sensor on your Android phone. If everything goes well, after a while, a success message will be displayed. </p>
<p><img src="/images/write-tag.png" alt="Write Tag"></p>
<p>Congratulations! You just copied your original NFC card.</p>
<h2 id="compare-dumps">Compare Dumps</h2>
<p>There is also a very useful tool called <em>Diff Tool (Compare Dumps) under </em>TOOLS* section in the app. Basically what it does is comparing the data between two NFC tags. You can use it to confirm the data in the NFC sticker is the same as that in your original IC card.</p>
<p><img src="/images/compare-dumps.png" alt="Compare Dumps"></p>
<p>Finally, the most exciting moment comes. It&#39;s time to test your NFC sticker. Hopefully it will work for you. If so, you no longer need to bring your original NFC card. Life becomes much easier.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Cross the GFW Using V2Ray ]]></title>
    <link href="https://olimovier.com/blog/2021/cross-the-gfw-using-v2ray/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2021-06-03T02:42:10Z</updated>
    <published>2021-04-08T02:56:47Z</published>
    <id>https://olimovier.com/blog/2021/cross-the-gfw-using-v2ray/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>After Shadowsocks died, I&#39;d been using Astrill VPN for some time. But it&#39;s not so ideal. The speed cannot be guaranteed and I always needed to try different servers to find one with fast speed. So again I decided to set up my own server to cross the GFW.</p>
<p>The technology I chose is V2Ray. It turns out to be a genius decision. For the past few months it always worked reliably. Here is what needs to be done to set up V2Ray.</p>
<p>Most importantly you need a VPS abroad and mine is from Linode JP. Most importantly you need to make sure the server is not blocked by GFW. You could use <a href="http://ping.chinaz.com/">this tool</a> to check. I also have a NAT from CloudIPLC, which is optional. I will talk more about it in later post. Now let&#39;s focus on the fundamentals. Both servers have x86-64 architecture and Ubuntu 18.04 as OS.</p>
<p>Although V2Ray doesn&#39;t distinguish between server and client like Shadowsocks does, it still needs consistency. You&#39;d better use the same version for them. Here I&#39;m using version <strong>4.27.0</strong>.</p>
<h2 id="set-up-v2ray-on-the-vps-abroad">Set up V2Ray on the VPS abroad</h2>
<p>The first thing is to install V2Ray on the server. You need two files to do so. One is <a href="/files/install-release.sh"><code>install-release.sh</code></a> and the other is <a href="https://github.com/v2ray/v2ray-core/releases/download/v4.27.0/v2ray-linux-64.zip"><code>v2ray-linux-64.zip</code></a>. After that run the command below to install V2Ray. Don&#39;t forget to add execute permission to the script file.</p>
<pre><code>wget https://github.com/v2ray/v2ray-core/releases/download/v4.27.0/v2ray-linux-64.zip
wget https://movier.github.io/files/install-release.sh
chmod +x install-release.sh
./install-release.sh -l v2ray-linux-64.zip
</code></pre><p>After that, according to the instructions, you may need to run the commands below.</p>
<pre><code>systemctl enable v2ray
systemctl start v2ray
</code></pre><p>Next we need to configure V2Ray. The path to the configuration file is <code>/usr/local/etc/v2ray/config.json</code>.</p>
<pre><code class="lang-json">{
    &quot;inbounds&quot;: [
        {
            &quot;port&quot;: 10086,
            &quot;protocol&quot;: &quot;vmess&quot;,
            &quot;settings&quot;: {
                &quot;clients&quot;: [
                    {
                        &quot;id&quot;: &quot;738b9584-82cd-40a6-810d-25b3c2133961&quot;
                    }
                ]
            }
        }
    ],
    &quot;outbounds&quot;: [
        {
            &quot;protocol&quot;: &quot;freedom&quot;,
            &quot;settings&quot;: {}
        }
    ]
}
</code></pre>
<p>As you can see, the content is super simple. Just replace the port and client id with your own value.</p>
<p>Finally V2Ray needs to be restarted to make the configurations work.</p>
<pre><code>service v2ray restart
</code></pre><h2 id="set-up-v2ray-on-mac">Set up V2Ray on Mac</h2>
<p>After setting up the server, we need a client to test it. Here I&#39;m using Mac. It&#39;s super simple to set up V2Ray on Mac. You just need Mac version for V2Ray which is <a href="https://github.com/v2ray/v2ray-core/releases/download/v4.27.0/v2ray-macos-64.zip"><code>v2ray-macos-64.zip</code></a> in my case. Unzip is and edit the configuration file <code>config.json</code> in the directory.</p>
<pre><code class="lang-json">{
    &quot;inbounds&quot;: [
        {
            &quot;port&quot;: 1080,
            &quot;listen&quot;: &quot;127.0.0.1&quot;,
            &quot;protocol&quot;: &quot;socks&quot;,
            &quot;settings&quot;: {
                &quot;udp&quot;: true
            }
        }
    ],
    &quot;outbounds&quot;: [
        {
            &quot;protocol&quot;: &quot;vmess&quot;,
            &quot;settings&quot;: {
                &quot;vnext&quot;: [
                    {
                        &quot;address&quot;: &quot;8.8.8.8&quot;,
                        &quot;port&quot;: 10086,
                        &quot;users&quot;: [
                            {
                                &quot;id&quot;: &quot;738b9584-82cd-40a6-810d-25b3c2133961&quot;
                            }
                        ]
                    }
                ]
            }
        },
        {
            &quot;protocol&quot;: &quot;freedom&quot;,
            &quot;tag&quot;: &quot;direct&quot;,
            &quot;settings&quot;: {}
        }
    ],
    &quot;routing&quot;: {
        &quot;domainStrategy&quot;: &quot;IPOnDemand&quot;,
        &quot;rules&quot;: [
            {
                &quot;type&quot;: &quot;field&quot;,
                &quot;outboundTag&quot;: &quot;direct&quot;,
                &quot;domain&quot;: [
                    &quot;geosite:cn&quot;
                ]
            },
            {
                &quot;type&quot;: &quot;field&quot;,
                &quot;outboundTag&quot;: &quot;direct&quot;,
                &quot;ip&quot;: [
                    &quot;geoip:cn&quot;,
                    &quot;geoip:private&quot;
                ]
            }
        ]
    }
}
</code></pre>
<p>Three values need to be set accordingly, which are address, port and user id. After that you can open v2ray executable file to start V2Ray. To test it, you can either set system proxy or use Proxy SwitchyOmega in Chrome.</p>
<p>If you are lucky enough, you can cross the GFW now.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Make Arduino a Smart Infrared Remote Control ]]></title>
    <link href="https://olimovier.com/blog/2021/make-arduino-a-smart-infrared-remote-control/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2021-01-29T06:49:30Z</updated>
    <published>2021-01-17T05:02:20Z</published>
    <id>https://olimovier.com/blog/2021/make-arduino-a-smart-infrared-remote-control/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<h2 id="background">Background</h2>
<p>I have a heater and I hope it could be closed late in the night (after I fall asleep) and be opened early in the morning (before I get up).</p>
<p>The heater has a IR remote control. So I&#39;m thinking if I could simulate the IR signal using Arduino. It turns out to be easy. There are only two steps involved. First is to record the IR signal and second is to send it.</p>
<h2 id="preparation">Preparation</h2>
<h3 id="hardware">Hardware</h3>
<p><img src="/images/hardwares.jpg" alt="Hardwares"></p>
<ul>
<li>Arduino UNO</li>
<li>IR Receiver module</li>
<li>IR Transmitter module</li>
<li>Others: charger, USB cable and jumper wires</li>
</ul>
<h3 id="software">Software</h3>
<p>You need to install a library called <code>IRremote</code> with specific version <strong>2.2.3</strong>. If you install the wrong version, the error below may be thrown when the codes are being compiled.</p>
<pre><code>usecpertick was not declared in this scope
</code></pre><h2 id="record-ir-signal">Record IR Signal</h2>
<p>Connect pin DATA/OUT from IR receiver module to pin 11 on Arduino UNO, VCC to 5V and GND to GND.</p>
<p>Try the codes below:</p>
<pre><code class="lang-C++">#include &lt;IRremote.h&gt;

int RECV_PIN = 11;
IRrecv irrecv(RECV_PIN);
decode_results results;

void setup() {
  Serial.begin(9600);
  irrecv.enableIRIn();
}

void loop() {
  if (irrecv.decode(&amp;results)) {
    dump(&amp;results);
    irrecv.resume();
  }
}

void dump(decode_results *results) {
  int count = results-&gt;rawlen;
  Serial.print(&quot;Raw (&quot;);
  Serial.print(count);
  Serial.print(&quot;): &quot;);
  for (int i = 0; i &lt; count; i++) {
    Serial.print(results-&gt;rawbuf[i]*USECPERTICK);
    Serial.print(&quot;,&quot;);
  }
  Serial.println();
}
</code></pre>
<p>Open the serial monitor. Point the remote control to the receive module and press one button. If everything goes well, you should see one line of numbers.</p>
<pre><code>Raw (72): 14358,4450,4450,450,1550,400,1550,450,1550,450,1500,450,1500,450,1500,500,2450,450,1500,450,2450,450,1550,450,2450,450,1500,450,1500,450,1550,450,2450,400,1550,450,1550,4400,4450,500,1500,450,1550,400,1550,400,1550,450,1550,450,1500,450,2450,450,1550,400,2500,400,1550,450,2450,450,1550,400,1550,400,1550,450,2450,450,1550,450,
</code></pre><p>If you press the same button again, you will see another similar line of numbers. You can choose either line of numbers. Remove <code>Raw (72):</code> and the first big number <code>14358</code>. Copy the remaining numbers. That&#39;s the data we need to send in the transmitting process.</p>
<h2 id="send-ir-signal">Send IR Signal</h2>
<p>Connect the pin DAT on the IR transmitter module to Arduino&#39;s pin 3, VCC to 5V, GND to GND.</p>
<p>The codes are super easy.</p>
<pre><code class="lang-C++">#include &lt;IRremote.h&gt;

IRsend irsend;
unsigned int key_name[71]={4450,4450,450,1550,400,1550,450,1550,450,1500,450,1500,450,1500,500,2450,450,1500,450,2450,450,1550,450,2450,450,1500,450,1500,450,1550,450,2450,400,1550,450,1550,4400,4450,500,1500,450,1550,400,1550,400,1550,450,1550,450,1500,450,2450,450,1550,400,2500,400,1550,450,2450,450,1550,400,1550,400,1550,450,2450,450,1550,450}; // Numbers we got from last step, here 71 is the length of all the numbers

void setup() {}

void loop() {
  irsend.sendRaw(key_name, 71, 38); // Change 71 to the length of all the numbers and keep 38 unchanged
  delay(5000);
}
</code></pre>
<p>Point the transmitter module to your device and make sure they are close enough. If you are lucky enough, the device should receive the IR signal and work as it should be. The only difference is the signal is not sent by the orginal remote control but by our Arduino UNO.</p>
<p>Here is the picture of the final result. The power supply used to be two batteries, but I found they can only work for about two days. So I replace them with a charger.</p>
<p><img src="/images/final_result.jpg" alt="Final result"></p>
<h2 id="add-on">Add-on</h2>
<p>Now we are able to send IR signal using Arduino, but there is still one more question. How can I control when to send it? </p>
<p>Actually this question cost me more time than sending the signal using Arduino itself. If Arduino has something like <code>cron</code> in Linux, that would be great. Luckily, with the help of two libraries, we can acheive that in Arduino.</p>
<p>The two libraries are <a href="https://github.com/PaulStoffregen/Time">Time</a> and <a href="https://github.com/PaulStoffregen/TimeAlarms">TimeAlarms</a>. They are from the same author which means they work well with each other.</p>
<p>The complete sketch could be found <a href="https://gist.github.com/movier/d29c33307ea4878ef2f19a1b26b9d022">here</a>.</p>
<hr>
<p><em>Reference</em></p>
<ul>
<li><a href="http://ultirobot.com/2018/04/07/ircontroler/">基于Arduino的解码红外遥控器控制家电（红外接收、红外发射）</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Watch Netflix in China ]]></title>
    <link href="https://olimovier.com/blog/2019/watch-netflix-in-china/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2020-12-27T07:11:31Z</updated>
    <published>2019-12-22T11:15:05Z</published>
    <id>https://olimovier.com/blog/2019/watch-netflix-in-china/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>For a long time, Netflix has always been my pain point. I could cross the GFW to visit most of the blocked websites, but not Netflix, because Netflix will detect your IP address, and if they think you are using a proxy, you will be blocked when you are trying to watch the video (Netflix won&#39;t block you if you just want to broswer their website).</p>
<p>Thanks to <a href="https://www.expressvpn.com/">ExpressVPN</a>, people who use their service won&#39;t be blocked by Netflix, but does it mean everyone can easily watch videos on Netflix just by using the VPN. Maybe it is true to the rest of the world, but not China. Most of the time it will be a failure when you try to connect to ExpressVPN directly in China. Even if you are lucky enough to make it, the speed is very limited. I almost gave up, but later I thought maybe I could use ExpressVPN based on SS. Since I already <a href="/blog/2019/install-ss-on-my-xiaomi-miwifi-x-r1d-with-tomato-firmware/">set up SS in my router</a>, I could forward all the requests to SS. I just need to change my iptables configurations.</p>
<pre><code class="lang-bash">#!/bin/sh

iptables -t nat -N SHADOWSOCKS

iptables -t nat -A SHADOWSOCKS -d 121.42.213.83 -j RETURN

iptables -t nat -A SHADOWSOCKS -d 192.168.0.0/16 -j RETURN

iptables -t nat -A SHADOWSOCKS -p tcp -j REDIRECT --to-ports 1080

iptables -t nat -A PREROUTING -p tcp -j SHADOWSOCKS
iptables -t nat -A OUTPUT -p tcp -j SHADOWSOCKS
</code></pre>
<p>It turns out to be a good idea. The speed is super fast. I&#39;m completely free when browsering the internet, but there are still some problems to improve or figure out.</p>
<ol>
<li>When connecting to the router (with configuration above) directly without VPN, without SS, I cannot watch YouTube. The video couldn&#39;t be loaded even though everything else works well.</li>
<li>I learnt from this <a href="https://twitter.com/abskoop/status/1207604085727195136?s=12">tweet</a> that we could unlock Netflix through DNS. Compared to ExpressVPN, it&#39;s much cheaper. Maybe I should give it a try later.</li>
<li>The iptables configurations could be improved. At least all the requests to Chinese servers shouldn&#39;t go through the VPN.</li>
</ol>
<p>Anyway let&#39;s enjoy Netflix first.</p>
<p>Reference:</p>
<ul>
<li><a href="https://zzz.buzz/zh/gfw/2016/02/16/deploy-shadowsocks-on-routers/">在路由器上部署 shadowsocks</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Install SS on My Xiaomi MiWiFi X-R1D with Tomato Firmware ]]></title>
    <link href="https://olimovier.com/blog/2019/install-ss-on-my-xiaomi-miwifi-x-r1d-with-tomato-firmware/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2019-12-22T10:53:09Z</updated>
    <published>2019-06-05T05:28:27Z</published>
    <id>https://olimovier.com/blog/2019/install-ss-on-my-xiaomi-miwifi-x-r1d-with-tomato-firmware/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<h2 id="preparation">Preparation</h2>
<p>1.create a directory</p>
<pre><code>mkdir -p /tmp/mnt/sda4/jffs/opt
</code></pre><p>2.mount the directory to <code>/opt</code></p>
<pre><code>mount -o bind /tmp/mnt/sda4/jffs/opt /opt
</code></pre><h2 id="install-entware-opkg">Install Entware/opkg</h2>
<p>1.install it by the command below</p>
<pre><code>wget -O - http://pkg.entware.net/binaries/armv7/installer/entware_install.sh | sh
</code></pre><p>2.The installation process may take a while. Please be patient until it&#39;s finished. Then confirm opkg has been installed correctly.</p>
<pre><code>opkg --version
</code></pre><h2 id="install-and-configure-ss">Install and configure SS</h2>
<p>1.install SS</p>
<pre><code>opkg install shadowsocks-libev-ss-redir
</code></pre><p>2.edit configuration file of SS</p>
<pre><code>vi /opt/etc/shadowsocks.json
</code></pre><p>3.put content below to the file and replace the value of server and password</p>
<pre><code>{
&quot;server&quot; : &quot;1.1.1.1&quot;,
&quot;server_port&quot; : &quot;443&quot;,
&quot;local_address&quot; : &quot;0.0.0.0&quot;,
&quot;local_port&quot; : &quot;1080&quot;,
&quot;password&quot;:&quot;password&quot;,
&quot;timeout&quot;:600,
&quot;method&quot;:&quot;aes-256-cfb&quot;
}
</code></pre><p>4.start SS</p>
<pre><code>ss-redir -c /opt/etc/shadowsocks.json
</code></pre><h2 id="configure-admin-panel-of-the-router">Configure admin panel of the router</h2>
<p>1.put the content below to <code>Administration &gt;&gt; Scripts &gt;&gt; init</code></p>
<pre><code>mount -o bind /tmp/mnt/sda4/jffs/opt /opt
/opt/etc/init.d/S22shadowsocks start
</code></pre><p>2.put the content below to <code>Advanced &gt;&gt; DHCP/DNS &gt;&gt; DHCP / DNS Server (LAN) &gt;&gt; Dnsmasq
Custom configuration</code></p>
<pre><code>conf-dir=/tmp/mnt/sda4/jffs/dnsmasq.d
</code></pre><p>3.create and edit <code>/tmp/mnt/sda4/jffs/dnsmasq.d</code> file and sample file could be found <a href="https://github.com/Alex1989Wang/Dotfiles/blob/master/gfwlist2dnsmasq/dnsmasq.conf">here</a>.</p>
<pre><code>server=/google.com/208.67.222.222#443
ipset=/google.com/gfwlist
</code></pre><p>4.put the content below to <code>Administration &gt;&gt; Scripts &gt;&gt; firewall</code></p>
<pre><code>#!/bin/sh

insmod ip_set
insmod ip_set_bitmap_ip
insmod ip_set_bitmap_ipmac
insmod ip_set_bitmap_port
insmod ip_set_hash_ip
insmod ip_set_hash_ipport
insmod ip_set_hash_ipportip
insmod ip_set_hash_ipportnet
insmod ip_set_hash_net
insmod ip_set_hash_netport
insmod ip_set_list_set
insmod xt_set

ipset -N gfwlist iphash
iptables -t nat -A PREROUTING -p tcp -m set --match-set gfwlist dst -j REDIRECT --to-port 1080
iptables -t nat -A OUTPUT -p tcp -m set --match-set gfwlist dst -j REDIRECT --to-port 1080
</code></pre><p>5.Restart your router and test SS.</p>
<p><strong>Reference</strong></p>
<ul>
<li><a href="https://www.awsomejiang.com/2018/08/10/Tomato-with-shadowsocks-libev-Automatic-proxy-for-your-router/">Tomato固件 + shadowsocks-libev - 实现对你路由的自动代理</a></li>
<li><a href="https://nap6.com/thread-275-1-1.html">Tomato部署ShadowSocks科学上网（只有被墙才会走VPN代理线路）</a></li>
<li><a href="https://ilmvfx.wordpress.com/2015/09/25/temporary-gfw-fuck-tutorial-put-shadowsocks-server-on-tomato-router/">临时回国的翻墙教程 （把shadowsocks服务端放在国外住处的tomato路由器上）– 简洁整理版</a></li>
<li><a href="https://zzz.buzz/zh/gfw/2016/02/16/deploy-shadowsocks-on-routers/">在路由器上部署 shadowsocks</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Linux Screen ]]></title>
    <link href="https://olimovier.com/blog/2018/linux-screen/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2019-12-22T06:05:17Z</updated>
    <published>2018-04-06T15:57:56Z</published>
    <id>https://olimovier.com/blog/2018/linux-screen/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>Sometimes we need to execute some time-consuming even everlasting tasks on our server. If we lose connection to the server those tasks will interrupt and stop running. Screen is a perfect command to solve this problem.</p>
<h2 id="create-a-new-screen">Create a new screen</h2>
<p>Just type <code>screen</code> to create a new screen. It will prompt up with some words. Ignore it. Just type space or enter to continue. After that you are in a new screen where you can  run time-consuming task. </p>
<p>Once the task is running and you want to leave it running there comes the most magic part of screen. Type <code>ctrl a + d</code> to detach from current screen. After that you will be in main screen and your task will keep running in the background.</p>
<h2 id="list-all-screens">List all screens</h2>
<p><code>screen -list</code> will list all your screens. The output will be something like this: </p>
<pre><code class="lang-bash">There are screens on:
    26243.pts-0.ip-172-31-22-134    (04/06/2018 03:39:26 PM)    (Detached)
    25118.pts-0.ip-172-31-22-134    (03/14/2018 10:34:28 AM)    (Detached)
2 Sockets in /var/run/screen/S-ubuntu.
</code></pre>
<p>At the beginning of each line there is a series of number like <code>26243</code> and <code>25118</code> above. These numbers are the process ids of each screen which could be used to reattach the screen.</p>
<h2 id="reattach-a-screen">Reattach a screen</h2>
<p><code>screen -r [session]</code> will help you reattach a screen from main screen. The parameter session is the process id of the screen you want to reattach. If there is only one screen the parameter could be omitted. After a screen is reattached and the task is finished you can run <code>exit</code> to exit the current screen.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Linux Crontab ]]></title>
    <link href="https://olimovier.com/blog/2018/linux-crontab/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2018-03-30T14:25:25Z</updated>
    <published>2018-03-23T09:17:17Z</published>
    <id>https://olimovier.com/blog/2018/linux-crontab/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>Crontab could help you run a task at fixed intervals. It&#39;s so easy to use crontab because it has only three main commands: <code>crontab -l</code>, <code>crontab -r</code> and <code>crontab -e</code>.</p>
<p><code>crontab -l</code> will list all your tasks. <code>crontab -r</code> will delete all your tasks. Please be especially careful when using it. The most important command is <code>crontab -e</code> which allows you to edit your tasks.</p>
<h2 id="select-an-editor">Select an editor</h2>
<p>What <code>crontab -e</code> actually does is to open your crontab file which contains all your scheduled tasks. So for the first time you run <code>crontab -e</code> it will ask you to select an editor:</p>
<pre><code class="lang-shell">Select an editor.  To change later, run &#39;select-editor&#39;.
  1. /bin/nano        &lt;---- easiest
  2. /usr/bin/sensible-editor
  3. /usr/bin/vim.basic
  4. /usr/bin/vim.tiny

Choose 1-4 [1]: 3
</code></pre>
<p>Just select an editor you like. If you select a wrong editor like I do don&#39;t worry. Just run <code>select-editor</code> to select again. You can also delete the file <code>~/.selected_editor</code> then for the next time you run <code>crontab -e</code> you will be asked to select an editor again.</p>
<h2 id="set-time">Set time</h2>
<p>Each line in the crontab file is a scheduled task. The comment content below is intuitive enough to explain how to set time.</p>
<pre><code class="lang-bash"># ┌───────────── minute (0 - 59)
# │ ┌───────────── hour (0 - 23)
# │ │ ┌───────────── day of month (1 - 31)
# │ │ │ ┌───────────── month (1 - 12)
# │ │ │ │ ┌───────────── day of week (0 - 6) (Sunday to Saturday;
# │ │ │ │ │                                       7 is also Sunday on some systems)
# │ │ │ │ │
# │ │ │ │ │
# * * * * *  command to execute
</code></pre>
<p>Leave it with <code>*</code> just means every time the symbol represents. For example <code>* * * * *</code> means every minute of every hour of every day of month of every month of every day of week. </p>
<p>Use <code>,</code> to indicate multiple time of the unit. For example <code>2,3 * * * *</code> means the second and third minutes of every hour of every...</p>
<p>One import thing to guarantee crontab works is that <strong>using absolute path</strong>.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Draw CSS Gradients ]]></title>
    <link href="https://olimovier.com/blog/2018/draw-css-gradients/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2021-01-17T04:56:40Z</updated>
    <published>2018-03-17T14:24:56Z</published>
    <id>https://olimovier.com/blog/2018/draw-css-gradients/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>Recently I found myself extremely interested in computer graphics. Meanwhile it&#39;s time to redesign my portfolio and I decide to make it colorful. Gradient is no doubt the easiest starting point.</p>
<p>Currently there are two types of gradients supported in CSS: linear gradient  </p>
<p><img src="/images/gradient6.svg" alt="Linear Gradient"></p>
<p>and radial gradient.</p>
<p><img src="/images/radial-gradient.svg" alt="Radial Gradient"></p>
<p>Comparing two pictures above you can easily distinguish which is which once you learn the concept of each gradient.</p>
<h2 id="linear-gradient">Linear gradient</h2>
<p>Suppose there is a rectangle. Let&#39;s try to draw a linear gradient step by step. </p>
<p>Let&#39;s start from the center of the rectangle which is also the intersection of diagonal. Make it origin and build a coordinate system.
<img src="/images/gradient1.svg" alt="">
Casually draw a line passing from the origin and we call it gradient line.
<img src="/images/gradient2.svg" alt="">
Find two vertices in the same quadrants of the gradient line and passing from them draw two perpendiculars of the gradient line. Call the perpendicular passing from vertex in Quadrant I or II starting point and the other perpendicular ending point.
<img src="/images/gradient3.svg" alt="">
Till now everything is ready to draw the gradient. From starting point to ending point we draw a series of lines with color linear changing by their position. 
<img src="/images/gradient4.svg" alt="">
Suppose color of starting point is rgba(r1, g1, b1, a1) and color of ending point is rgba(r2, g2, b2, a2). The distance between starting point and ending point is E and the line we will draw has moved F away from starting point. I guess color of the line will be:</p>
<p>rgba(r1 + (r2-r1)<em>F/E, g1 + (g2-g1)</em>F/E, b1 + (b2-b1)<em>F/E, a1 + (a2-a1)</em>F/E)</p>
<p>Finally we have drawn our linear gradient.
<img src="/images/gradient5.svg" alt=""></p>
<h2 id="radial-gradient">Radial gradient</h2>
<p>Radial gradient is more complicated than linear gradient because it has more parameters. Don&#39;t worry we will try to draw it from scratch.</p>
<p>Again let&#39;s start with a rectangle in a coordinate system.
<img src="/images/Radial-Gradient1.svg" alt="">
Next we need to choose a shape from ellipse and circle. Circle is just a special kind of ellipse. To make it more common let&#39;s choose ellipse. BTW the default value is also ellipse. The shape of our ellipse is always the same with the biggest ellipse inside the rectangle. Then we need to choose a position which will be starting point and the center of our ellipse.
<img src="/images/Radial-Gradient2.svg" alt="">
After that we need to decide how far our ellipse ends from center.
<img src="/images/Radial-Gradient3.svg" alt="">
Now from the starting point we draw a series of ellipse towards ending position. The color of each ellipse is determined by how far it has moved, the same with linear gradient.
<img src="/images/Radial-Gradient4.svg" alt="">
Finally we&#39;ll get result.
<img src="/images/Radial-Gradient5.svg" alt=""></p>
<h2 id="conclusion">Conclusion</h2>
<p>This is just the very first step of my exploring of computer graphics. In the future I will learn more and share with you guys. Stay tuned.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://css-tricks.com/css3-gradients/">CSS Gradients</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Images/Using_CSS_gradients">Using CSS gradients</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient">linear-gradient()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/radial-gradient">radial-gradient()</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Train My First Machine Learning Model ]]></title>
    <link href="https://olimovier.com/blog/2018/train-my-first-machine-learning-model/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2018-03-16T01:46:52Z</updated>
    <published>2018-03-09T08:41:57Z</published>
    <id>https://olimovier.com/blog/2018/train-my-first-machine-learning-model/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>I&#39;m always interested in machine learning since I learned the concept last year. After watching a lot of videos and reading a bunch of posts, I trained my first machine learning model a few days ago. It&#39;s so exciting that I can&#39;t wait to share my experience. </p>
<p>If you want to check out the codes directly please visit my GitHub <a href="https://github.com/movier/ems-captcha-recognition">repository</a>.</p>
<h2 id="find-a-problem">Find a problem</h2>
<p>The first also the most important thing to train a model is to find a problem which is currently handled by human but could be solved by machine. If you are one of the human it will be great because you will be willing to save yourself a lot of time.</p>
<p>I use <a href="http://ems.com.cn">EMS</a>(Express Mail Service) a lot after my baby was born because I need to query milk powder from Germany(<em>Big thanks to my best friend in Germany</em>) and commodities from Amazon Japan. The stupid website asks user to recognize a captcha before showing mail information. Thus I found my problem which is to recognize the captcha from their website using machine learning. The captcha looks like this: </p>
<p><img src="/images/unknow.jpg" alt="EMS captcha"></p>
<p>To our human being it&#39;s an easy task. Believe it or not it&#39;s also a piece of cake to a computer thanks to machine learning.</p>
<h2 id="analysis-the-problem">Analysis the problem</h2>
<p>The captcha is always composed of six numbers and my goal is to recognize all the numbers from the captcha image which could be thought as a image classification problem. I have went through <a href="https://codelabs.developers.google.com/codelabs/tensorflow-for-poets">TensorFlow for Poets</a> from Google Developers Codelabs. The tutorial teaches you how to train a simple classifier to classify images of flowers step by step. Maybe my problem could also be solved if I do correctly according to the tutorial. I want to try.</p>
<p>There is a question to ask before I can train my model. what&#39;s the categories? Categories are the whole possible result to a specific image classification problem. It seems reasonable to label them from 000000 to 999999. But I will need huge amount of traning data if I classify like this. Instead I chose to cut the captcha into six pieces which contain their own number. The segment will look like this:</p>
<p><img src="/images/3597.jpeg" alt="Segment after cutting"></p>
<p>Thus my categories become 0 to 9. I only need to recognize each piece of the captcha and combine their result together to get final result.</p>
<h2 id="prepare-training-data">Prepare training data</h2>
<p>My machine learning model needs to be fed by data. How can I get data? It&#39;s always been a difficult problem for machine learning newbies. I use a most stupid method. Just download a lot of captcha from EMS website and save them using their value as name. </p>
<p>As I have analysised the problem I need to preprocess these labeled captcha and organize them correctly before training. According to the tutorial I need to create ten directories with names from 0 to 9 and put each segment into their corresponding directory. </p>
<h2 id="train-model">Train model</h2>
<p>With training data prepared I can train my model simply with a script according to the <a href="https://codelabs.developers.google.com/codelabs/tensorflow-for-poets/#3">tutorial</a>. After executing the Python script I came across a error. It turns out that the image size of my training data is too small. So I need to scale the segment. I scale it with 128 width and 197 height. why 128x192? Beacuse 128 is the smallest size supported by the script and 197 is caculated according to the original ratio of width and height. After scaling the segment looks like this:</p>
<p><img src="/images/5498.jpeg" alt="Segment after scaling"></p>
<p>Then I can train again and this time the script should run without any problem. The whole traning process should cost you dozens of seconds.</p>
<h2 id="use-trained-model">Use trained model</h2>
<p>After training I could use my model to predict a segment number simply by running a predicting script. Predicting a whole captcha just becomes a for loop.</p>
<p>To make things easier I wrote a python script to query mail status and integrate it into my IM robot system. I only need to send a mail number to my IM robot who will crawl EMS website, download a captcha, predict its value, submit the result, parse the response and send the result back to me.</p>
<h2 id="conclusion">Conclusion</h2>
<p>So far I have successfully used machine learning to solve my problem. Although I did not come across any difficult parts throughout the process, such as mathsmatics, model definitions and more, it was still very exciting and significantly increased my interest in exploring more about machine learning.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Bitwise Operators ]]></title>
    <link href="https://olimovier.com/blog/2018/bitwise-operators/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2018-03-15T10:18:07Z</updated>
    <published>2018-02-01T16:40:21Z</published>
    <id>https://olimovier.com/blog/2018/bitwise-operators/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>Recently I came across a question from Interview Cake and it could be solved gracefully by bitwise operator XOR which arouse my interest. I will show you the question and the answer at the end of the post. Now let&#39;s learn some basic knowledge of bitwise operators.</p>
<p>When you saw symbols like &amp;, |, ^, ~, &gt;&gt; or &lt;&lt; they represent bitwise operators.</p>
<blockquote>
<p>They operate on numbers (normally), but instead of treating that number as if it were a single value, they treat it as if it were a string of bits, written in twos-complement binary.</p>
</blockquote>
<p>But wait! What&#39;s two&#39;s complement binary?</p>
<h2 id="two-s-complement-binary">Two&#39;s complement binary</h2>
<blockquote>
<p>A two&#39;s complement binary is same as the classical binary representation for positve integers but is slightly different for negative numbers. Negative numbers are represented by performing the two&#39;s complement operation on their absolute value. </p>
</blockquote>
<blockquote>
<p>Negative numbers are written with a leading one instead of a leading zero. So if you are using only 8 bits for your twos-complement numbers, then you treat patterns from &quot;00000000&quot; to &quot;01111111&quot; as the whole numbers from 0 to 127, and reserve &quot;1xxxxxxx&quot; for writing negative numbers.</p>
</blockquote>
<p>Let&#39;s assume there are totally 8 bits and there is a positive number 118. How can we get two&#39;s complement binary of -118?</p>
<ol>
<li>Make the positive number minus one: <code>118 - 1 // 117</code></li>
<li>Convert the result to its binary format using JavaScript: <code>117..toString(2) // 01110101</code></li>
<li>Perform complement (switched from 1 to 0 or 0 to 1, actually it&#39;s a Bitwise NOT operation): <code>01110101 =&gt; 10001010</code></li>
</ol>
<p>On the contrary if we got a two&#39;s complement binary 10001010 how can we calculate its positive number?</p>
<ol>
<li>Perform complement (Bitwise NOT): <code>10001010 =&gt; 01110101</code></li>
<li>Plus one: <code>01110101 + 1 = 01110110</code></li>
<li>Convert to decimal using JavaScript: <code>parseInt(&#39;01110110&#39;, 2) // output 118</code></li>
</ol>
<h3 id="a-question-about-two-s-complement">A question about two&#39;s complement</h3>
<p>In two&#39;s complement positive and negative depend on the leading bit. It seems we must have limited bits otherwise we don&#39;t know which bit is the leftmost symbol bit. Some languages use this solution like JavaScript. In JavaScript only 32 bits will be preserved to guarantee bitwise operations.</p>
<p>It turns out that there is another sulution and it&#39;s totally oppsite direction. In Python there is no limit number of bits but an INFINITE number of bits. So -5 will be implemented as <code>...11111111111111011</code>. To be honest I favor this one.</p>
<h2 id="the-operators">The operators</h2>
<p>With two&#39;s complement in head the operators are quite easy. </p>
<h3 id="logical-operators">Logical operators</h3>
<p>Let&#39;s see three of the operators first: &amp; (Bitwise AND), | (Bitwise OR) and ^ (Bitwise XOR).</p>
<table style="width:400px;max-width:100%;margin: auto;text-align:center">
  <thead>
    <tr style="background-color:lightGray">
      <th style="width:20%">a</th>
      <th style="width:20%">b</th>
      <th style="width:20%">a &amp; b</th>
      <th style="width:20%">a | b</th>
      <th style="width:20%">a ^ b</th>
    </tr>
  </thead>
  <tbody>
    <tr style="background-color:#f6f5f8">
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr style="background-color:#eae9eb">
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr style="background-color:#f6f5f8">
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr style="background-color:#eae9eb">
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>

<p>And the operator ~ (Bitwise NOT):</p>
<table style="width:400px;max-width:100%;margin: auto;text-align:center">
  <thead>
    <tr style="background-color:lightGray">
      <th style="width:50%">a</th>
      <th>~ a</th>
    </tr>
  </thead>
  <tbody>
    <tr style="background-color:#f6f5f8">
      <td>0</td>
      <td>1</td>
    </tr>
        <tr style="background-color:#eae9eb">
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>

<h3 id="shift-operators">Shift operators</h3>
<p>&lt;&lt; and &gt;&gt; are the two symbols used to shift bits on a two&#39;s complement binary.</p>
<ul>
<li>a &lt;&lt; b means shift a&#39;s bits to the left by b places. New bits on the right will be 0. </li>
<li>a &gt;&gt; b means shift a&#39;s bits to the right by b places. New bits on the left will be the same as original leftmost bit. </li>
</ul>
<h3 id="some-formulas">Some formulas</h3>
<pre><code>a &amp; 0 = 0
a &amp; -1 = -1
a | 0 = a
a | -1 = -1
a ^ 0 = a
a ^ -1 = ~a
-a = ~(a - 1) = ~a + 1 =&gt; ~a = -(a + 1)
a &lt;&lt; b = a * 2 ** b
a &gt;&gt; b = a / 2 ** b
</code></pre><h2 id="the-question">The question</h2>
<p>There is an array composed of number pair except one which is isolate. Number pair means two numbers with same value. The question is how can you find the isolate number in a most efficient way. You should consider both time complexity and space complexity.</p>
<p>With Bitwise XOR we can solve this problem gracefully.</p>
<pre><code class="lang-javascript">const a = [23, 34, 53, 64, 64, 34, 53];
let isolate = 0;
for (let i = 0; i &lt; a.length; i++) {
  isolate ^= a[i];
}
</code></pre>
<p>Time complexity is O(n) and thanks to Bitwise XOR space complexity is just O(1).</p>
<h2 id="reference-">Reference:</h2>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators">Bitwise operators - Javascript | MDN</a></li>
<li><a href="https://wiki.python.org/moin/BitwiseOperators">BitwiseOperators - Python Wiki</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Bye 2017 Hi 2018 ]]></title>
    <link href="https://olimovier.com/blog/2018/bye-2017-hi-2018/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2018-03-16T02:27:55Z</updated>
    <published>2018-01-11T16:33:53Z</published>
    <id>https://olimovier.com/blog/2018/bye-2017-hi-2018/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>One word to summarize 2017 is Ollie which is the nickname of my baby. Except working I spent almost all my time with her and she made me the happiest person in the world.</p>
<h2 id="review-of-2017">Review of 2017</h2>
<p>As planned I should have been studying computer science in US. Unfortunately it didn&#39;t come true. So I had to find a job. On Mar 1st I began to work as a front-end developer for Investarget which is a investment bank based at Shanghai. I joined a fantastic team and learned a lot every day.</p>
<p>As Ollie grows up we began to travel with her. So far we have been to Wuxi and Taicang. Each journey left us precious memory.</p>
<p>The only thing I feel regret in 2017 is about football. I enjoy playing football so much. But it has been more than eight months since last time I play football. What a shame!</p>
<h3 id="reading">Reading</h3>
<p>Thanks to Kindle Paperwhite I have read several books this years. Actually majority of them are from two writers: <strong>Ken Follett</strong> and <strong>Dan Brown</strong>. </p>
<p>Their novels are so attractive that I don&#39;t want to miss any one. Recently I&#39;m reading <em>A Column of Fire</em> from Ken and Later I will read <em>Origin</em> from Dan.</p>
<h3 id="shopping">Shopping</h3>
<p>This year I bought only one device which is Zhiyun Smooth Q. It&#39;s a 3-axis gimbal stabilizer. With Zhiyun Smooth Q I can shot videos more easily and professionally. I have already published several videos shot with Zhiyun Smooth Q on <a href="https://www.youtube.com/channel/UCbzIryTWI4Ljy1z0j1kfhlw/videos">YouTube</a>. Of course they are all about Ollie.</p>
<h2 id="prospect-of-2018">Prospect of 2018</h2>
<p>For a lot of reasons I&#39;m not satisfied with my current life. I&#39;m determined to make some change. So in July I applied for a work and holiday visa of Australia. My plan in the new year is to find a job in Australia and settle down there. It&#39;s not an easy thing I know. But I will try my best.</p>
<p>Hope me good luck!</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Realize Half Pixel Border in Chrome ]]></title>
    <link href="https://olimovier.com/blog/2017/realize-half-pixel-border-in-chrome/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2018-02-01T17:17:39Z</updated>
    <published>2017-11-10T01:51:46Z</published>
    <id>https://olimovier.com/blog/2017/realize-half-pixel-border-in-chrome/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>Sometimes we need to realize half pixel border for beautiful UI and it&#39;s not as simple as you think.</p>
<h2 id="problem">Problem</h2>
<p><code>border-width: 0.5px</code> works in Safari. But it doesn&#39;t work in Chrome. </p>
<p><strong>HTML</strong></p>
<pre><code class="lang-html">&lt;div class=&quot;content&quot;&gt;Content&lt;/div&gt;
</code></pre>
<p><strong>CSS</strong></p>
<pre><code class="lang-css">.content {
  border-bottom: 0.5px solid lightGray
}
</code></pre>
<p><strong>Result in Chrome</strong></p>
<div style="border-bottom: 1px solid lightGray">Content</div>
<div style="border-bottom: 1px solid lightGray">Content</div>
<div style="border-bottom: 1px solid lightGray">Content</div>
<div style="border-bottom: 1px solid lightGray">Content</div>
<div style="border-bottom: 1px solid lightGray">Content</div>

<h2 id="solution">Solution</h2>
<p>We need to do something special.</p>
<p><strong>HTML</strong></p>
<pre><code class="lang-html">&lt;div class=&quot;container&quot;&gt;
    &lt;div&gt;Content&lt;/div&gt;
    &lt;div class=&quot;border&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p><strong>CSS</strong></p>
<pre><code class="lang-css">.container {
    position: relative;
}
.border{
    position: absolute;
    top: -50%;
    right: -50%;
    bottom: -50%;
    left: -50%;
    border: 1px solid #333;
    -webkit-transform: scale(0.5);
    transform: scale(0.5);
}
</code></pre>
<p><strong>Result</strong></p>
<div style="position: relative">
    <div>Content</div>
    <div style="-webkit-transform: scale(0.5);transform: scale(0.5);position: absolute;border-bottom: 1px solid lightGray;top: -50%;right: -50%;bottom: -50%;left: -50%;"></div>
</div>
<div style="position: relative">
    <div>Content</div>
    <div style="-webkit-transform: scale(0.5);transform: scale(0.5);position: absolute;border-bottom: 1px solid lightGray;top: -50%;right: -50%;bottom: -50%;left: -50%;"></div>
</div>
<div style="position: relative">
    <div>Content</div>
    <div style="-webkit-transform: scale(0.5);transform: scale(0.5);position: absolute;border-bottom: 1px solid lightGray;top: -50%;right: -50%;bottom: -50%;left: -50%;"></div>
</div>
<div style="position: relative">
    <div>Content</div>
    <div style="-webkit-transform: scale(0.5);transform: scale(0.5);position: absolute;border-bottom: 1px solid lightGray;top: -50%;right: -50%;bottom: -50%;left: -50%;"></div>
</div>
<div style="position: relative">
    <div>Content</div>
    <div style="-webkit-transform: scale(0.5);transform: scale(0.5);position: absolute;border-bottom: 1px solid lightGray;top: -50%;right: -50%;bottom: -50%;left: -50%;"></div>
</div>

<p>Let&#39;s analysis the CSS codes. At first we make the border <code>div</code> absolute and twice as big as the content <code>div</code>. Then we set 1px border for the border <code>div</code>. At last we scale the border <code>div</code> to half. The border is scaled at the same time. So its width will be 0.5px. </p>
<p>Actually the result we see is composed of two parts: content from content <code>div</code> and border from border <code>div</code>. They together produce  an illusion that the content has a 0.5px border.</p>
<p>Cheer! We realize our goal.</p>
<p>If you want to learn more about the problem please refer <a href="http://www.zhangyunling.com/543.html">this post</a>. BTW it&#39;s Chinese.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ IIFE Immediately Invoked Function Expression ]]></title>
    <link href="https://olimovier.com/blog/2017/iife-immediately-invoked-function-expression/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2017-11-10T01:56:31Z</updated>
    <published>2017-11-02T07:31:29Z</published>
    <id>https://olimovier.com/blog/2017/iife-immediately-invoked-function-expression/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>IIFE (Immediately Invoked Function Expression) is a JavaScript function that runs as soon as it is defined.</p>
<p>Let&#39;s see an example:</p>
<pre><code class="lang-javascript">(function demo() {
  console.log(&#39;This is a IIFE&#39;);
})();
</code></pre>
<p>If you run the codes above you will see the output immediately. This is a typical IIFE. But it could be completely replaced by single line code <code>console.log(&#39;This is a IIFE&#39;);</code>. Then why do we need IIFE? </p>
<h2 id="iife-helps-to-write-elegant-codes">IIFE helps to write elegant codes</h2>
<p>Sometimes we have to define a function. For example <code>await</code> has to be used in an async function and recursion is generally connected with a function. </p>
<p>If the function is called only once IIFE will help to write elegant codes.</p>
<p>Let&#39;s see some example:</p>
<p><strong>async function</strong></p>
<p>Without IIFE we need to define an async function and call it:</p>
<pre><code class="lang-javascript">function resolveAfterSeconds(x) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
        console.log(&#39;Hello&#39;);
      resolve();
    }, x);
  });
}
async function demo() {
  await resolveAfterSeconds(2000);
  console.log(&#39;IIFE&#39;);
}
demo();
</code></pre>
<p>With IIFE you can simply run the async function directly:</p>
<pre><code class="lang-javascript">function resolveAfterSeconds(x) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
        console.log(&#39;Hello&#39;);
      resolve();
    }, x);
  });
}
(async function demo() {
  await resolveAfterSeconds(2000);
  console.log(&#39;IIFE&#39;);
})();
</code></pre>
<p>You even don&#39;t need to give a name to the async function:</p>
<pre><code class="lang-javascript">function resolveAfterSeconds(x) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
        console.log(&#39;Hello&#39;);
      resolve();
    }, x);
  });
}
(async () =&gt; {
  await resolveAfterSeconds(2000);
  console.log(&#39;IIFE&#39;);
})();
</code></pre>
<p><strong>recursive function</strong></p>
<p>Recursive function is the same as async function. Let&#39;s take factorial for example.</p>
<p>Without IIFE:</p>
<pre><code class="lang-javascript">function factorial(number) {
  if (number &lt;=0) {
    return 1;
  } else {
    return number * factorial(number - 1);
  }
}
factorial(8);
</code></pre>
<p>With IIFE:</p>
<pre><code class="lang-javascript">(function factorial(number) {
  if (number &lt;=0) {
    return 1;
  } else {
    return number * factorial(number - 1);
  }
}(8));
</code></pre>
<h2 id="iife-allows-to-create-a-new-block-scope">IIFE allows to create a new block scope</h2>
<p>What does it mean by create a new block scope? If you try to run the codes below:</p>
<pre><code class="lang-javascript">for (var i = 0; i &lt; 5; i++) {
  setTimeout(function () {
    console.log(&#39;index: &#39; + i);
  }, 1000);
}
</code></pre>
<p>You will be surprised at the result:</p>
<pre><code>index: 5
index: 5
index: 5
index: 5
index: 5
</code></pre><p>But if you run with IIFE:</p>
<pre><code class="lang-javascript">for (var i = 0; i &lt; 5; i++) {
  (function logIndex(index) {
    setTimeout(function () {
      console.log(&#39;index: &#39; + index);
    }, 1000);
  })(i)
}
</code></pre>
<p> You will get exactly what you want:</p>
<pre><code>index: 0
index: 1
index: 2
index: 3
index: 4
</code></pre><p>You will learn more about the example above from IIFE section in <a href="https://developer.telerik.com/topics/web-development/understanding-scope-in-javascript/amp/">Understanding Scope in JavaScript</a>.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Git Reflog ]]></title>
    <link href="https://olimovier.com/blog/2017/git-reflog/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2017-11-13T15:34:33Z</updated>
    <published>2017-10-27T15:21:02Z</published>
    <id>https://olimovier.com/blog/2017/git-reflog/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>It was a ordinary day. I modified codes and did commits as usual. Later I found last commit was not necessary any more. So I decided to reset it. The change was still useful so I want to keep it.</p>
<p>I knew related command was <code>git reset</code> but I was not sure which mode to use. At this circumstance I didn&#39;t go to look up the manual but use <code>git reset --hard</code> casually. How ridiculous I was! The result proved that. I lost all my changes.</p>
<p>Though I felt depressed at that moment I still believed that Git had the ability to restore the changes. So I began to search on Internet. Finally I found the answer which is <code>git reflog</code>.</p>
<p>So what is <code>git reflog</code>?</p>
<p>I prefer the explanation from Atlassian Git Tutorial:</p>
<blockquote>
<p>The reflog is Git’s safety net. It records almost every change you make in your repository, regardless of whether you committed a snapshot or not. You can think of it is a chronological history of everything you’ve done in your local repo.</p>
</blockquote>
<p>If I ran <code>git reflog</code> I would see something like this:</p>
<pre><code>b0cd221 (HEAD -&gt; master) HEAD@{0}: reset: moving to b0cd221
23b4878 HEAD@{1}: commit: Recursive function works
b0cd221 HEAD@{2}: commit: Ready to write recursive function
...
</code></pre><p>The first line is exactly my stupid behavior. The second line is the commit I lose. So I could easily restore it by running <code>git reset --hard 23b4878</code>. Thanks to Git I was rescued.</p>
<p>If you want to learn more about <code>git reflog</code> and its usage. I recommend two posts from Atlassian Git Tutorial: <a href="https://www.atlassian.com/git/tutorials/rewriting-history">Rewriting history</a> and <a href="https://www.atlassian.com/git/tutorials/rewriting-history/git-reflog">git reflog</a>. Among them <em>The safety net: git reflog</em> part from Rewriting history describes the same situation I face here and <em>Recovering lost commits</em> part from git reflog is also worth reading.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Git Svn ]]></title>
    <link href="https://olimovier.com/blog/2017/git-svn/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2018-03-16T14:51:09Z</updated>
    <published>2017-10-24T05:18:12Z</published>
    <id>https://olimovier.com/blog/2017/git-svn/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>Back to March this year when I come to the company I&#39;m working for now I need to work on a project which use Svn for version control system. But I have always been using Git except for a very short time in my early programming life in 2012. I definitely don&#39;t want to use Svn again. Fortunately Git is so powerful that it can event interact with Svn repositories. </p>
<hr>
<p>The main command to realize this is <code>git svn</code>.</p>
<p><strong>1. Clone</strong></p>
<pre><code class="lang-sh">git svn clone url://path/to/repo -s
</code></pre>
<p>which is equivalent to </p>
<pre><code class="lang-sh">git svn clone url://path/to/repo -T trunk -b branches -t tags
</code></pre>
<p><strong>2. Pull</strong></p>
<pre><code class="lang-sh">git svn rebase
</code></pre>
<p><strong>3. Push</strong></p>
<pre><code class="lang-sh">git svn dcommit
</code></pre>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Wrap your Commands into a Shell Script ]]></title>
    <link href="https://olimovier.com/blog/2017/wrap-your-commands-into-a-shell-script/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2017-11-02T07:25:50Z</updated>
    <published>2017-10-23T08:24:58Z</published>
    <id>https://olimovier.com/blog/2017/wrap-your-commands-into-a-shell-script/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>Recently when I try to backup a MongoDB database running in a docker container with command line, I find the command is too long to remember.</p>
<pre><code>docker run --rm -it --net server_default --link server_mongo_1:mongo -v ~/backup:/backup mongo mongodump --host mongo --db olivia-server --out /backup
</code></pre><p>Wouldn&#39;t it be great if you don&#39;t need to remember or look up the command when use! Fortunatelty you can! All you need to do is wrap your long commands into a shell script.</p>
<hr>
<p>Let me show you how to realize this:</p>
<p><strong>1. Create a file called <code>mongodump</code> under the <code>~/bin</code> directory:</strong></p>
<pre><code>mkdir ~/bin &amp;&amp; touch ~/bin/mongodump
</code></pre><p><strong>2. Edit the file and add your command:</strong></p>
<pre><code class="lang-sh">#!/bin/sh
docker run --rm -it --net server_default --link server_mongo_1:mongo -v ~/backup:/backup mongo mongodump --host mongo --db olivia-server --out /backup
</code></pre>
<p><strong>3. Modify the permission of your script file:</strong></p>
<pre><code class="lang-sh">chmod 755 mongodump
</code></pre>
<p><strong>4. Add <code>~/bin</code> to your system path:</strong></p>
<p>If you are using bash edit <code>~/.bash_profile</code> or if you are using zsh edit <code>~/.zshrc</code> add following line:</p>
<pre><code class="lang-sh">export PATH=&quot;$HOME/bin:$PATH&quot;
</code></pre>
<p>Save and restart your shell. Now you can just type <code>dockerdump</code> to run the shell.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Timezone Matters ]]></title>
    <link href="https://olimovier.com/blog/2017/timezone-matters/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2017-11-17T04:03:57Z</updated>
    <published>2017-10-20T06:09:22Z</published>
    <id>https://olimovier.com/blog/2017/timezone-matters/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>Recently I came across an interesting problem when dealing with date. When using javascript date object, chrome and safari render different result with the same date string. If I run <code>new Date(&#39;2017-09-04T09:52:15&#39;)</code> in browser deveopler console, chrome will output <code>Mon Sep 04 2017 09:52:15 GMT+0800 (CST)</code> and safari will output <code>Mon Sep 04 2017 17:52:15 GMT+0800 (CST)</code>. </p>
<p>The reason is obvious if you compare the result carefully. Since I lose my timezone information in the date string, the two browsers react differently to this situation. Chrome will take your computer&#39;s timezone as default timezone when parsing the date string. Meanwhile safari will take the string as UTC time.</p>
<p>If we could add timezone information to the date string, there won&#39;t be such problem. The question is how we add timezone to the date string. Fortunately there is something called <strong>ISO date format</strong>. The format is as follows:</p>
<pre><code>YYYY-MM-DDTHH:mm:ss.sssZ
</code></pre><p>Specific descriptions of each symbol can be found on <a href="https://docs.microsoft.com/en-us/scripting/javascript/date-and-time-strings-javascript#ISO">Microsoft Docs</a>. If you append <code>Z</code> to the end of the above string and run <code>new Date(&#39;2017-09-04T09:52:15Z&#39;)</code>, chrome and  safari will output the same result. Bingo! We got it.</p>
<h2 id="make-iso-date-format-localized">Make ISO Date Format Localized</h2>
<p>ISO date format is simple but it&#39;s not intuitive because we are used to our own timezone which means it needs to be formatted to local date time. Let&#39;s see how we can realize that.</p>
<p>JavaScript</p>
<pre><code class="lang-javascript">const isoDateString = &quot;2017-09-04T09:52:15.000Z&quot;;
const localizedDateString = new Date(isoDateString).toLocaleString(); 
console.log(localizedDateString); // &quot;9/4/2017, 5:52:15 PM&quot;
</code></pre>
<p>Java</p>
<pre><code class="lang-java">import java.time.format.DateTimeFormatter;
import java.util.Date;
import java.text.SimpleDateFormat;
import java.time.Instant;
import java.time.temporal.TemporalAccessor;

public class ISODateStringToLocalizedDateString {
        public static void main(String[] args) {    
                String isoDateString = &quot;2017-09-29T15:47:36.504Z&quot;;
                DateTimeFormatter formatter = DateTimeFormatter.ISO_INSTANT;
                TemporalAccessor accessor = formatter.parse(isoDateString);
                Date date = Date.from(Instant.from(accessor));
                SimpleDateFormat dateFormatter = new SimpleDateFormat();
                String localizedDateString = dateFormatter.format(date);
                System.out.println(localizedDateString); // &quot;9/29/17 11:47 PM&quot;
        }
}
</code></pre>
<p>Swift</p>
<pre><code class="lang-swift">import UIKit

var dateString = &quot;2017-09-04T09:52:15.000Z&quot;
dateString = &quot;\(dateString.components(separatedBy: &quot;.&quot;)[0])Z&quot;
let date = ISO8601DateFormatter().date(from: dateString)!
let dateFormatter = DateFormatter()
dateFormatter.dateStyle = .short
dateFormatter.timeStyle = .short
dateFormatter.string(from: date) // &quot;9/4/17, 5:52 PM&quot;
</code></pre>
<h2 id="convert-local-date-to-iso-date-format">Convert Local Date to ISO Date Format</h2>
<p>I got the date string without timezone information from server. So it&#39;s reasonable to blame the back-end developer. But when client submit date to server timezone information should also be included. </p>
<p>JavaScript</p>
<pre><code class="lang-javascript">new Date(2017, 09, 04, 17, 30, 30).toISOString(); // &quot;2017-09-29T15:46:22.164Z&quot; 
</code></pre>
<p>Java</p>
<pre><code class="lang-java">import java.util.Date;
import java.text.SimpleDateFormat;

public class LocalDateStringToISODateFormat {
    public static void main(String[] args) {
        try {
            SimpleDateFormat df = new SimpleDateFormat(&quot;dd/MM/yyyy HH:mm:ss.SSS&quot;);
            Date date = df.parse(&quot;16/10/2015 15:25:07.861&quot;);
            String ISODateString = date.toInstant().toString();
            System.out.println(ISODateString);
        } catch (Exception e) {
            System.out.println(e);
        }
    }
}
new Date().toInstant().toString() // &quot;2017-09-29T15:47:36.504Z&quot;
</code></pre>
<p>Swift</p>
<pre><code class="lang-swift">import UIKit

let localDateString = &quot;2017-09-04 17:30:30&quot;
let dateFormatter = DateFormatter()
dateFormatter.dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;
let date = dateFormatter.date(from: localDateString)!
var str = ISO8601DateFormatter().string(from: date)
str.insert(contentsOf: &quot;.000&quot;, at: str.index(str.endIndex, offsetBy: -1))
print(str)
</code></pre>
<p>Only when both client and server pass date as ISO format it could be displayed correctly!</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Hex Code and RGB values in CSS Color ]]></title>
    <link href="https://olimovier.com/blog/2017/hex-code-and-rgb-values-in-css-color-2/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2018-03-16T02:43:24Z</updated>
    <published>2017-09-19T13:55:00Z</published>
    <id>https://olimovier.com/blog/2017/hex-code-and-rgb-values-in-css-color-2/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>In CSS we could use either RGB values or hex code to set value of a color. But have you ever thought about <em>why</em> we could do this? At least for me I have never thought about such question until doing a related <a href="https://www.freecodecamp.org/challenges/use-hex-code-for-specific-colors">challenge</a> on freeCodeCamp. </p>
<p>For example when it comes to magenta, we can either use <code>#FF00FF</code> in hex code  or <code>rgb(255, 0, 255)</code> in RGB values. Use RGB values for color is easy to understand. But what the hell is hex code? How could it represent for the same color as RGB values do. It turns out that hex code is just another format of RGB values. </p>
<p>Let’s see a picture.</p>
<p><img src="/images/2017-09-19.jpg" alt="2017-09-19.jpg"></p>
<p>Through the picture we can easily find that hex code could be divided into three parts and each part is just hexadecimal format of its related color value. Specifically the two character on the left is hexadecimal format of red value, the two character on the middle is hexadecimal format of green value and the two character on the right is hexadecimal format of blue value.</p>
<p>Now we know the structure of hex code. It&#39;s time to write some Python codes to convert between them. </p>
<h2 id="convert-hex-to-rgb">Convert Hex to RGB</h2>
<p>At first we need to define a function to convert hex to decimal.</p>
<pre><code class="lang-python">hexToDecimalDict = { 
    &quot;0&quot;: 0, 
    &quot;1&quot;: 1, 
    &quot;2&quot;: 2, 
    &quot;3&quot;: 3, 
    &quot;4&quot;: 4, 
    &quot;5&quot;: 5, 
    &quot;6&quot;: 6, 
    &quot;7&quot;: 7, 
    &quot;8&quot;: 8, 
    &quot;9&quot;: 9, 
    &quot;A&quot;: 10, 
    &quot;B&quot;: 11, 
    &quot;C&quot;: 12, 
    &quot;D&quot;: 13, 
    &quot;E&quot;: 14, 
    &quot;F&quot;: 15, 
    &quot;a&quot;: 10,
    &quot;b&quot;: 11,
    &quot;c&quot;: 12,
    &quot;d&quot;: 13,
    &quot;e&quot;: 14,
    &quot;f&quot;: 15
}
def hexToDecimal(hexCode):
    length = len(hexCode)
    return reduce(
        lambda x, y: x + y, 
        [hexToDecimalDict[hexCode[i]]*16**(length - i - 1) for i in range(0, length)]
    )

print hexToDecimal(&quot;FF&quot;) # output 255
</code></pre>
<p>With the help of function <code>hexToDecimal()</code>, it&#39;s so easy to convert hex color to its GRB mode.</p>
<pre><code class="lang-python">def hexToRGB(hexColor):
    n = 2
    return &quot;rgb(%s)&quot; % &quot;, &quot;.join([str(hexToDecimal(hexColor[i:i+n])) for i in range(1, len(hexColor), n)])
print hexToRGB(&quot;#10458F&quot;) # output &#39;rgb(16, 69, 143)&#39;
</code></pre>
<p>Alternatively we can use a build-in function <code>int()</code> to convert hex to decinal. Try to replace <code>hexToDecimal(hexColor[i:i+n])</code> with <code>int(hexColor[i:i+n], 16)</code> you will get the same answer.</p>
<h2 id="convert-rgb-to-hex">Convert RGB to Hex</h2>
<p>Just as above we need to define a function to convert decimal to hex.</p>
<pre><code class="lang-python">decimalToHexArr = [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;]
def decimalToHex(decimalValue, hexCode=&quot;&quot;):
    if decimalValue &lt; 16:
        return &quot;0x&quot; + decimalToHexArr[decimalValue] + hexCode
    quotient = decimalValue / 16
    remainder = decimalValue % 16
    return decimalToHex(quotient, decimalToHexArr[remainder] + hexCode)
decimalToHex(143) # output &#39;0x8F&#39;
</code></pre>
<p>It&#39;s also very easy to convert RGB color to its hex format.</p>
<pre><code class="lang-python">import re
def RGBToHex(RGBColor):
    return &quot;#%s&quot; % &quot;&quot;.join([
        decimalToHex(int(x.strip()))[2:] for x in re.search(&quot;\((.*)\)&quot;, RGBColor).group(1).split(&quot;,&quot;)
    ])
RGBToHex(&quot;rgb(16, 69, 143)&quot;) # output &#39;#10458F&#39;
</code></pre>
<p>There is also a build-in function <code>hex()</code> which can realize the same function as <code>decimalToHex()</code> do.</p>
<p>After learn how to convert RGB color to its hex format and vice versa, I&#39;m also curious about two more questions about CSS color.</p>
<h2 id="why-there-is-a-symbol-in-the-hex-code-">Why there is a symbol ‘#’ in the hex code?</h2>
<p>It turns out that the symbol is just a <a href="https://en.wikipedia.org/wiki/Hexadecimal#Representation">representation</a> of hexadecimal. Nothing more.</p>
<h2 id="why-rgb-value-is-between-0-to-255-">Why RGB value is between 0 to 255?</h2>
<p>There are totally 256 possibilities from 0 to 255. 256 is exactly 2 to the 8th power which is 8 bits. 8 bits is exactly 1 byte. What a coincidence! It turns out that the range of RGB value is exactly designed for 1 byte. If you are wondering why 1 byte is equal to 8 bits, the <a href="https://www.quora.com/Why-it-is-that-1-Byte-is-equal-to-8-Bits/answer/Amogh-Talpallikar">answer</a> from Quora is really helpful.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Valid Palindrome ]]></title>
    <link href="https://olimovier.com/blog/2017/valid-palindrome/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2017-11-16T02:18:55Z</updated>
    <published>2017-03-11T21:02:15Z</published>
    <id>https://olimovier.com/blog/2017/valid-palindrome/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p>Once during a technical interview, I was asked to validate whether a sentence is a palindrome or not. But what’s a palindrome? A <a href="https://en.wikipedia.org/wiki/Palindrome">palindrome</a> is a word, phrase, number, or other sequence of characters which reads the same backward as forward, such as &quot;A man, a plan, a canal, Panama!&quot;, &quot;Was it a car or a cat I saw?&quot; or &quot;No &#39;x&#39; in Nixon&quot;.</p>
<h2 id="my-solution">My Solution</h2>
<p>During the interview I just reverse the sentence and compare with the original sentence. Even ignore case and punctuation it’s still wrong. How could “Was I tac a ro rac a ti saw?” be the same with &quot;Was it a car or a cat I saw?”. Obviously the problem is space. What if I even ignore space?</p>
<blockquote>
<p>&quot;Talk is cheap. Show me the code.&quot;</p>
</blockquote>
<pre><code class="lang-java">public boolean isPalindrone(String s) {
    String pattern = &quot;\\w&quot;;
    Pattern r = Pattern.compile(pattern);
    Matcher m = r.matcher(s);

    StringBuilder sb = new StringBuilder();

    while(m.find()) {
        sb.append(m.group(0));
    }

    String oldString = sb.toString();
    String reversedString = sb.reverse().toString();

    if (!oldString.equalsIgnoreCase(reversedString)) {
        return false;
    }

    return true;
}
</code></pre>
<h2 id="another-solution">Another Solution</h2>
<p>You can also find the problem on <a href="https://leetcode.com/problems/valid-palindrome">LeetCode</a>. I find a more elegant sultion <a href="https://discuss.leetcode.com/topic/8282/accepted-pretty-java-solution-271ms">there</a>. Here is the codes.</p>
<pre><code class="lang-java">public boolean isPalindrome(String s) {
    if (s.isEmpty()) {
        return true;
    }
    int head = 0, tail = s.length() - 1;
    char cHead, cTail;
    while(head &lt;= tail) {
        cHead = s.charAt(head);
        cTail = s.charAt(tail);
        if (!Character.isLetterOrDigit(cHead)) {
            head++;
        } else if(!Character.isLetterOrDigit(cTail)) {
            tail--;
        } else {
            if (Character.toLowerCase(cHead) != Character.toLowerCase(cTail)) {
                return false;
            }
            head++;
            tail--;
        }
    }
    return true;
}
</code></pre>
<p>All point here is that the first letter or digit character must be the same with the last letter or digit character and the second must be the same with the reciprocal second and so on.</p>
<h2 id="conclusion">Conclusion</h2>
<p>The two solutions represent two totally different ways of thinking the problem. My solution is from Macro and the other one is from Micro. In my opinion solving this kind of problem from Micro is more difficult and thus more elegant.</p>
<p>BTW you can find a lot of Palindromic Sentences from <a href="https://www2.cs.arizona.edu/icon/oddsends/palinsen.htm">here</a> and you can do some test.</p>
]]></content>
  </entry>
  <entry>
    <title><![CDATA[ Develop a Hexo Theme with Gulp and Browsersync ]]></title>
    <link href="https://olimovier.com/blog/2016/develop-a-hexo-theme-with-gulp-and-browsersync/"></link>
    <author>
      <name>Oli Movie R</name>
    </author>
    <updated>2022-09-15T01:37:54Z</updated>
    <published>2016-04-14T20:48:09Z</published>
    <id>https://olimovier.com/blog/2016/develop-a-hexo-theme-with-gulp-and-browsersync/</id>
    <content type="html" xml:base="https://olimovier.com/" xml:lang="en"><![CDATA[<p><img src="/images/develop-a-hexo-theme-with-gulp-and-browsersync.png" alt="Final Result"></p>
<p><a href="https://hexo.io">Hexo</a> is a fast, simple&amp;powerful blog framework. I have use Hexo for my personal blog for some time and recently I decide to {% post_link some-little-things-recently develop a theme for Hexo %}.</p>
<p><a href="https://www.browsersync.io">Browsersync</a> is a awesome testing tool for front-end developer. It will synchronize all your behavior on different browsers or devices and save us a lot of time. There is no doubt that I will use Browsersync for all front-end develop work. This time no except.</p>
<p>The basic of developing a Hexo theme is to create some ejs templates and stylus files. Hexo will generate the content dynamically convert ejs templates to html and stylus to css. You need to modify stylus files and open browser to see the style. The question is that Browsersync need static html and css files. Yes, Hexo has a command called <code>hexo generate</code> which could generate static html and css files to <code>public</code> directory. We don&#39;t want to call <code>hexo generate</code> every time we modify the stylus files because the process will waste a lot of time. At the same time we don&#39;t want to modify the static css file in <code>public</code> directory directly because we will lose the modification afte <code>hexo generate</code> is called again. What we really want is after we modify stylus files Browsersync just works.</p>
<p>How to realize that? The answer is <a href="http://gulpjs.com">Gulp</a>. Gulp is a front-end build system and Browsersync integrated with Gulp very well. The trick here is to use Gulp to generate and override the static css file every time we modify the stylus files. Talk is cheap. Let me show you the code.</p>
<p>Firstly install the dependencies:</p>
<pre><code class="lang-bash">npm install browser-sync gulp gulp-stylus --save-dev
</code></pre>
<p>Secondly create a file called <code>gulpfile.js</code> and add content below:</p>
<pre><code class="lang-javascript">var gulp        = require(&#39;gulp&#39;),
    browserSync = require(&#39;browser-sync&#39;).create(),
    stylus      = require(&#39;gulp-stylus&#39;);

gulp.task(&#39;serve&#39;, function() {
    // tell Browsersync serve the static directory
    browserSync.init({
        server: {
            baseDir: &quot;../../public&quot;
        }
    });
    // once stylus file is modified perform `stylus` task
    gulp.watch(&quot;./source/css/**/*.styl&quot;, [&#39;stylus&#39;]);
});

gulp.task(&#39;stylus&#39;, function () {
  return gulp.src(&#39;./source/css/style.styl&#39;) // tell gulp the source stylus file
    .pipe(stylus()) // compile stylus to css
    .pipe(gulp.dest(&#39;../../public/css&#39;)) // output new css file to override
    .pipe(browserSync.stream()); // inject new css file
});

gulp.task(&#39;default&#39;, [&#39;serve&#39;]);
</code></pre>
<p>Last preform <code>gulp</code> directly under your theme&#39;s directory. The magic thus happened. Browsersync will open a new tab in the default browser for you. Once you modify the stylus file and save the change Browsersync will reload automatically on all devices connected to the url. By the way don&#39;t forget to perform <code>hexo generate</code> to generate static files in <code>public</code> directory before perform <code>gulp</code>.</p>
<p>Happy coding!</p>
]]></content>
  </entry>
</feed>