<!DOCTYPE html>
<html>
<head>
 <meta charset="utf-8">
 <!-- Use 获取iOS设备具体型号 for dynamic title -->
 <title>OLIVER</title>

 
   <link rel="icon" href="/images/avatar.png">
 
 
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
 <!-- Twitter bootstrap (via cdn) -->
 <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"> -->
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/font-awesome-4.5.0/css/font-awesome.min.css">
</head>
<body>
  <!-- <div class='container'> -->
    <ul class="main-navigation">
  
    
      <li><a href="/"><u>Home</u></a></li>
    
  
    
      <li><a href="/blog"><u>Blog</u></a></li>
    
  
    
  
    
  
</ul>

<div class="container">
<div class="post-detail">
<div class='entry'>
  <div class='entry-header'>
    <h1 class="title">获取iOS设备具体型号</h1>
    <footer class="entry-meta">发布于 2015-11-11。属于
      技术
      分类，被贴了
      iOS、Objective-C
      标签。</footer>
  </div>
  <p>如果我想知道用户使用的具体是哪一款iOS设备，应该怎么做呢？由于<code>UIDevice</code>类中并未提供相关方法直接获取设备具体型号，因此需要我们自己写方法。</p>
<p>我们打算使用Objective-C中的<a href="https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/Category.html" target="_blank" rel="external">Category</a>语言特性为UIDevice添加一个新的方法，用于获取设备的具体型号。</p>
<p>使用Category时像创建一个普通类一样新建.h和.m文件，类的名字使用“ClassName+CategoryName”的形式。我们这里就用<code>UIDevice+DetailModel</code>作为类名。</p>
<p>在<code>UIDevice+DetailModel.h</code>文件中：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UIDevice</span> (<span class="title">DetailModel</span>)</span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)detailModel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>在<code>UIDevice+DetailModel.m</code>文件中：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"UIDevice+DetailModel.h"</span></span></span><br><span class="line"><span class="meta">#include <span class="meta-string">&lt;sys/sysctl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UIDevice</span> (<span class="title">DetailModel</span>)</span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)detailModel &#123;</span><br><span class="line"></span><br><span class="line">    size_t size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set 'oldp' parameter to NULL to get the size of the data</span></span><br><span class="line">    <span class="comment">// returned so we can allocate appropriate amount of space</span></span><br><span class="line">    sysctlbyname(<span class="string">"hw.machine"</span>, <span class="literal">NULL</span>, &amp;size, <span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Allocate the space to store name</span></span><br><span class="line">    <span class="keyword">char</span> *name = malloc(size);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get the platform name</span></span><br><span class="line">    sysctlbyname(<span class="string">"hw.machine"</span>, name, &amp;size, <span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Place name into a string</span></span><br><span class="line">    <span class="built_in">NSString</span> *machine = [<span class="built_in">NSString</span> stringWithUTF8String:name];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Done with this</span></span><br><span class="line">    free(name);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> machine;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>定义好Category之后，像普通的方法一样去使用就行了，别忘了引入头文件：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"UIDevice+DetailModel.h"</span></span></span><br><span class="line"></span><br><span class="line">[[<span class="built_in">UIDevice</span> currentDevice] detailModel];</span><br></pre></td></tr></table></figure>
<p>使用这个方法得到的是设备的具体型号，譬如“iPhone3,1、iPhone5,1”等，通用名称可以去<a href="https://www.theiphonewiki.com/wiki/Models" target="_blank" rel="external">the iPhone wiki</a>查询。</p>
<p>参考链接：</p>
<ul>
<li><a href="http://iosdevelopertips.com/device/determine-if-iphone-is-3g-or-3gs-determine-if-ipod-is-first-or-second-generation.html" target="_blank" rel="external">Determine iPhone and iPad Hardware Machine and Device Type</a></li>
<li><a href="http://www.techrepublic.com/blog/software-engineer/better-code-determine-device-types-and-ios-versions/" target="_blank" rel="external">Better Code: Determine Device Types and iOS Versions</a></li>
</ul>

</div>
</div>
</div>
<div class="footer">
  <p class="align-left"><i>Powered by <a href="https://hexo.io"><u>Hexo</u></a> Theme by <a href="https://github.com/movier/hexo-theme-alpha"><u>Alpha</u></a></i></p>
  <p class="align-right">Copyright © 2016 MOVIER.ME - All Rights Reserved.</p>
  <div style="clear: both;"></div>
</div>


    <!-- <div class="footer">
  <p class="align-left"><i>Powered by <a href="https://hexo.io"><u>Hexo</u></a> Theme by <a href="https://github.com/movier/hexo-theme-alpha"><u>Alpha</u></a></i></p>
  <p class="align-right">Copyright © 2016 MOVIER.ME - All Rights Reserved.</p>
  <div style="clear: both;"></div>
</div>
 -->
  <!-- </div> -->
</body>
</html>
