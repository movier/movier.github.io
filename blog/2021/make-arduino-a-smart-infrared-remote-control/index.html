<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Oliver Young</title>
  <link href="https://fonts.googleapis.com/css?family=Droid+Serif" rel="stylesheet">
  <link rel="stylesheet" href="/markdown.css">
<style type="text/css">
body {
  margin: 0;
}
#app {
  margin: 0 auto;
}
#social-media {
  margin: 6px;
  float: right;
}
#header {
  max-width: 1080px;
  margin: auto;
  margin-top: 140px;
  margin-bottom: 80px;
  text-align: center;
  font-family: -apple-system, 'Helvetica Neue';
}
#header h1 {
  font-size: 38px;
  color: #333333;
  font-weight: bold;
  letter-spacing: normal;
}
#header p {
  font-size: 22px;
  color: #A9A9A9;
  -webkit-font-smoothing: antialiased;
}
.divider {
  height: 1px;
  background-color: #E6E6E6;
}
#post-list {
  max-width: 700px;
  margin: 80px auto;
  padding: 0;
}
#post-list li {
  list-style: none;
}
</style><style type="text/css">
.post-list h1 {
  font-size: 20px;
  font-weight: bold;
  letter-spacing: normal;
  margin: 0;
}
.post-list a {
  color: #333;
  text-decoration: none;
}
.post-list a:hover {
  text-decoration: underline;
}
.post-list .date, .post-list .category-and-tags {
  font-size: 12px;
  color: #9E9E9E;
}
.post-list .summary {
  font-size: 14px;
  line-height: 24px;
  color: #333;   
  overflow-wrap: break-word;
}
.post-list-divider {
    margin: 30px auto;
}
</style><style type="text/css">
.post-container {
  margin-top: 120px;
  margin-bottom: 100px;
}
.entry-title, .entry-meta, .content {
    margin-left: auto;
    margin-right: auto;
    max-width: 700px;
    padding-left: 18px;
    padding-right: 18px;
}
.entry-title, .entry-meta {
  text-align: center;
}
.entry-title {
  -webkit-font-smoothing: antialiased;
  margin-top: 0;
  letter-spacing: .02em;
}
.entry-meta {
  font-size: 14px;
  color: #9e9e9e;
}
.content {
  margin-top: 30px;
}
.content img {
  max-width: 100%;
  display: block;
  margin: auto;
}
pre {
  padding: 10px;
  overflow: auto;
  border: #E3EDF3 1px solid;
  background: #F7FAFB;
}
.banner {
  padding: 160px 0;
  text-align: center;
  background: linear-gradient(to bottom, #545454, #bdbdbd);
}
</style><style type="text/css">
.post-list h1 {
  font-size: 20px;
  font-weight: bold;
  letter-spacing: normal;
  margin: 0;
}
.post-list a {
  color: #333;
  text-decoration: none;
}
.post-list a:hover {
  text-decoration: underline;
}
.post-list .date, .post-list .category-and-tags {
  font-size: 12px;
  color: #9E9E9E;
}
.post-list .summary {
  font-size: 14px;
  line-height: 24px;
  color: #333;   
  overflow-wrap: break-word;
}
.post-list-divider {
    margin: 30px auto;
}
</style><style type="text/css">
#nav a {
  text-decoration: none;
}
#nav {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 55px;
  margin: 0 28px;
  display: flex;
  align-items: center;
  font-size: 13px;
  font-family: Helvetica, sans-serif;
  font-weight: bold;
  color: rgba(0, 0, 0, .48);
  border-bottom: 1px solid rgba(0, 0, 0, .05);
}
#nav::after {
  height: 1px;
  color: rgba(0, 0, 0, .05);
}
.nav-left, .nav-right {
  flex: 1;
  display: flex;
}
.nav-right {
  justify-content: flex-end;
}
.nav-left > .nav-item {
  padding-right: 12px;
}
.nav-right > .nav-item {
  padding-left: 12px;
}
#social-media a {
  font-family: -apple-system;
  color: #8B572A;
}
#social-media a:hover {
  color: #733F10;
}
</style><style type="text/css">
textarea {
  width: 100%;
  height: 400px;
}
.h1 {
  font-size: 24px;
}
</style><style type="text/css">
#app {
  /* max-width: 1080px; */
  margin: 0 auto;
}
#social-media {
  margin: 6px;
  float: right;
}

/* #header {
  margin: 80px auto;
  text-align: center;
  font-family: -apple-system, 'Helvetica Neue';
} */
#header h1 {
  font-size: 38px;
  color: #333333;
}
#header p {
  font-size: 22px;
  color: #A9A9A9;
  -webkit-font-smoothing: antialiased;
}
.divider {
  height: 1px;
  background-color: #E6E6E6;
}
#post-list {
  max-width: 700px;
  margin: 80px auto;
  padding: 0;
}
#post-list li {
  list-style: none;
}
.write-button-container {
  max-width: 700px;
  margin: 0 auto;
  margin-top: 80px;
  text-align: right;
}
.button {
  padding: 8px 16px;
  border: 1px solid rgba(0, 0, 0, .25);
  border-radius: 4px;
  text-decoration: none;
  color: rgba(0, 0, 0, .25);
  font-family: sans-serif;
  font-size: 14px;
}
.button:hover {
  border: 1px solid rgba(0, 0, 0, .45);
  color: rgba(0, 0, 0, .45);
}
</style><style type="text/css">
input, textarea {
  border: none;
}
textarea {
  height: 50px;
}
.title {
  font-size: 20px;
  font-weight: bold;
}
.post-list a:hover {
  text-decoration: underline;
}
.post-list .date, .post-list .category-and-tags {
  font-size: 12px;
  color: #9E9E9E;
}
.post-list .summary {
  font-size: 14px;
  line-height: 24px;
  color: #333;   
  overflow-wrap: break-word;
}
.post-list-divider {
    margin: 30px auto;
}
.operation {
  cursor: pointer;
}
</style><style type="text/css">
.coming-soon {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 44px;
    font-weight: bold;
}
</style><style type="text/css">
body[data-v-712cc44a] {
  margin: 0;
}
a[data-v-712cc44a] {
  text-decoration: none;
}
.container[data-v-712cc44a] {
  max-width: 700px;
  margin: 80px auto;
  padding: 0;
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  grid-column-gap: 10px;
  grid-row-gap: 10px;
}
.item-1[data-v-712cc44a] {
  grid-column-start: 1;
  grid-column-end: 7;
}
.item-2[data-v-712cc44a] {
  grid-column-start: 7;
  grid-column-end: 10;
}
.item-3[data-v-712cc44a] {
  grid-column-start: 10;
  grid-column-end: 13;
}
.item-4[data-v-712cc44a] {
  grid-column-start: 7;
  grid-column-end: 10;
}
.item-5[data-v-712cc44a] {
  grid-column-start: 10;
  grid-column-end: 13;
}
.item-6[data-v-712cc44a] {
  grid-column-start: 1;
  grid-column-end: 5;
}
.item-7[data-v-712cc44a] {
  grid-column-start: 5;
  grid-column-end: 9;
}
.item-8[data-v-712cc44a] {
  grid-column-start: 9;
  grid-column-end: 13;
}
</style><style type="text/css">
a[data-v-8fb1d0ca] {
  display: block;
  width: 100%;
}
.post-list[data-v-8fb1d0ca] {
  background: linear-gradient(to bottom right, #545454, #bdbdbd);
  height: 100%;
}
.post-list h1[data-v-8fb1d0ca] {
  font-size: 20px;
  font-weight: bold;
  letter-spacing: normal;
  margin: 0;
  color: white;
}
.post-list a[data-v-8fb1d0ca] {
  color: #333;
  text-decoration: none;
}
.post-list a[data-v-8fb1d0ca]:hover {
  text-decoration: underline;
}
.post-list .date[data-v-8fb1d0ca], .post-list .category-and-tags[data-v-8fb1d0ca] {
  font-size: 12px;
  color: #9E9E9E;
}
.post-list .abstract[data-v-8fb1d0ca] {
  font-size: 14px;
  line-height: 24px;
  color: white;
  overflow-wrap: break-word;
}
.post-list-divider[data-v-8fb1d0ca] {
  margin: 30px auto;
}
</style></head>
<body>
    <div id="app"><div id="nav"><div style="margin: auto;"><a href="/" class="router-link-active"><img height="26" id="logo" src="/logo.svg"></a></div></div> <div class="post-container view"><h1 class="entry-title">Make Arduino a Smart Infrared Remote Control</h1> <div class="entry-meta">Jan 17, 2021 #Arduino</div> <div class="content"><h2 id="background">Background</h2>
<p>I have a heater and I hope it could be closed late in the night (after I fall asleep) and be opened early in the morning (before I get up).</p>
<p>The heater has a IR remote control. So I'm thinking if I could simulate the IR signal using Arduino. It turns out to be easy. There are only two steps involved. First is to record the IR signal and second is to send it.</p>
<h2 id="preparation">Preparation</h2>
<h3 id="hardware">Hardware</h3>
<p><img src="/images/hardwares.jpg" alt="Hardwares"></p>
<ul>
<li>Arduino UNO</li>
<li>IR Receiver module</li>
<li>IR Transmitter module</li>
<li>Others: batteries and jumper wires</li>
</ul>
<h3 id="software">Software</h3>
<p>You need to install a library called <code>IRremote</code> with specific version <strong>2.2.3</strong>. If you install the wrong version, the error below may be thrown when the codes are being compiled.</p>
<pre><code>usecpertick was not declared in this scope
</code></pre><h2 id="record-ir-signal">Record IR Signal</h2>
<p>Connect pin DATA/OUT from IR receiver module to pin 11 on Arduino UNO, VCC to 5V and GND to GND.</p>
<p>Try the codes below:</p>
<pre><code class="lang-C++">#include &lt;IRremote.h&gt;

int RECV_PIN = 11;
IRrecv irrecv(RECV_PIN);
decode_results results;

void setup() {
  Serial.begin(9600);
  irrecv.enableIRIn();
}

void loop() {
  if (irrecv.decode(&amp;results)) {
    dump(&amp;results);
    irrecv.resume();
  }
}

void dump(decode_results *results) {
  int count = results-&gt;rawlen;
  Serial.print("Raw (");
  Serial.print(count);
  Serial.print("): ");
  for (int i = 0; i &lt; count; i++) {
    Serial.print(results-&gt;rawbuf[i]*USECPERTICK);
    Serial.print(",");
  }
  Serial.println();
}
</code></pre>
<p>Open the serial monitor. Point the remote control to the receive module and press one button. If everything goes well, you should see one line of numbers.</p>
<pre><code>Raw (72): 14358,4450,4450,450,1550,400,1550,450,1550,450,1500,450,1500,450,1500,500,2450,450,1500,450,2450,450,1550,450,2450,450,1500,450,1500,450,1550,450,2450,400,1550,450,1550,4400,4450,500,1500,450,1550,400,1550,400,1550,450,1550,450,1500,450,2450,450,1550,400,2500,400,1550,450,2450,450,1550,400,1550,400,1550,450,2450,450,1550,450,
</code></pre><p>If you press the same button again, you will see another similar line of numbers. You can choose either line of numbers. Remove <code>Raw (72):</code> and the first big number <code>14358</code>. Copy the remaining numbers. That's the data we need to send in the transmitting process.</p>
<h2 id="send-ir-signal">Send IR Signal</h2>
<p>Connect the pin DAT on the IR transmitter module to Arduino's pin 3, VCC to 5V, GND to GND.</p>
<p>The codes are super easy.</p>
<pre><code class="lang-C++">#include &lt;IRremote.h&gt;

IRsend irsend;
unsigned int key_name[71]={4450,4450,450,1550,400,1550,450,1550,450,1500,450,1500,450,1500,500,2450,450,1500,450,2450,450,1550,450,2450,450,1500,450,1500,450,1550,450,2450,400,1550,450,1550,4400,4450,500,1500,450,1550,400,1550,400,1550,450,1550,450,1500,450,2450,450,1550,400,2500,400,1550,450,2450,450,1550,400,1550,400,1550,450,2450,450,1550,450}; // Numbers we got from last step, here 71 is the length of all the numbers

void setup() {}

void loop() {
  irsend.sendRaw(key_name, 71, 38); // Change 71 to the length of all the numbers and keep 38 unchanged
  delay(5000);
}
</code></pre>
<p>Point the transmitter module to your device and make sure they are close enough. If you are lucky enough, the device should receive the IR signal and work as it should be. The only difference is the signal is not sent by the orginal remote control but by our Arduino UNO.</p>
<p><img src="/images/final_result.jpg" alt="Final result"></p>
<h2 id="add-on">Add-on</h2>
<p>Now we are already able to send IR signal using Arduino, but there is still one more question. How can I control when to send it? </p>
<p>Actually this question cost me more time than sending the signal using Arduino itself. If Arduino has something like <code>cron</code> in Linux, that would be great. Luckily, with the help of two libraries, we can acheive that in Arduino.</p>
<p>The two libraries are <a href="https://github.com/PaulStoffregen/Time">Time</a> and <a href="https://github.com/PaulStoffregen/TimeAlarms">TimeAlarms</a>. They are from the same author which means they work well with each other.</p>
<p>The complete sketch could be found <a href="https://gist.github.com/movier/d29c33307ea4878ef2f19a1b26b9d022">here</a>.</p>
<hr>
<p><em>Reference</em></p>
<ul>
<li><a href="http://ultirobot.com/2018/04/07/ircontroler/">基于Arduino的解码红外遥控器控制家电（红外接收、红外发射）</a></li>
</ul>
</div> <input type="hidden" id="loaded-signal"></div> <p class="copyright">Copyright © 2017 MOVIER.ME - All Rights Reserved.</p></div>
  


</body></html>