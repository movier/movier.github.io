<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Oliver Young</title>
  <link href="https://fonts.googleapis.com/css?family=Droid+Serif" rel="stylesheet">
  <link rel="stylesheet" href="/markdown.css">
<style type="text/css">
body {
  margin: 0;
}
#app {
  margin: 0 auto;
}
#social-media {
  margin: 6px;
  float: right;
}
#header {
  max-width: 1080px;
  margin: auto;
  margin-top: 140px;
  margin-bottom: 80px;
  text-align: center;
  font-family: -apple-system, 'Helvetica Neue';
}
#header h1 {
  font-size: 38px;
  color: #333333;
  font-weight: bold;
  letter-spacing: normal;
}
#header p {
  font-size: 22px;
  color: #A9A9A9;
  -webkit-font-smoothing: antialiased;
}
.divider {
  height: 1px;
  background-color: #E6E6E6;
}
#post-list {
  max-width: 700px;
  margin: 80px auto;
  padding: 0;
}
#post-list li {
  list-style: none;
}
</style><style type="text/css">
.post-list h1 {
  font-size: 20px;
  font-weight: bold;
  letter-spacing: normal;
  margin: 0;
}
.post-list a {
  color: #333;
  text-decoration: none;
}
.post-list a:hover {
  text-decoration: underline;
}
.post-list .date, .post-list .category-and-tags {
  font-size: 12px;
  color: #9E9E9E;
}
.post-list .summary {
  font-size: 14px;
  line-height: 24px;
  color: #333;   
  overflow-wrap: break-word;
}
.post-list-divider {
    margin: 30px auto;
}
</style><style type="text/css">
.post-container {
  margin-top: 120px;
  margin-bottom: 100px;
}
.entry-title, .entry-meta, .content {
    margin-left: auto;
    margin-right: auto;
    max-width: 700px;
    padding-left: 18px;
    padding-right: 18px;
}
.entry-title, .entry-meta {
  text-align: center;
}
.entry-title {
  -webkit-font-smoothing: antialiased;
  margin-top: 0;
  letter-spacing: .02em;
}
.entry-meta {
  font-size: 14px;
  color: #9e9e9e;
}
.content {
  margin-top: 30px;
}
.content img {
  max-width: 100%;
  display: block;
  margin: auto;
}
pre {
  padding: 10px;
  overflow: auto;
  border: #E3EDF3 1px solid;
  background: #F7FAFB;
}
.banner {
  padding: 160px 0;
  text-align: center;
  background: linear-gradient(to bottom, #545454, #bdbdbd);
}
</style><style type="text/css">
.post-list h1 {
  font-size: 20px;
  font-weight: bold;
  letter-spacing: normal;
  margin: 0;
}
.post-list a {
  color: #333;
  text-decoration: none;
}
.post-list a:hover {
  text-decoration: underline;
}
.post-list .date, .post-list .category-and-tags {
  font-size: 12px;
  color: #9E9E9E;
}
.post-list .summary {
  font-size: 14px;
  line-height: 24px;
  color: #333;   
  overflow-wrap: break-word;
}
.post-list-divider {
    margin: 30px auto;
}
</style><style type="text/css">
#nav a {
  text-decoration: none;
}
#nav {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 55px;
  margin: 0 28px;
  display: flex;
  align-items: center;
  font-size: 13px;
  font-family: Helvetica, sans-serif;
  font-weight: bold;
  color: rgba(0, 0, 0, .48);
  border-bottom: 1px solid rgba(0, 0, 0, .05);
}
#nav::after {
  height: 1px;
  color: rgba(0, 0, 0, .05);
}
.nav-left, .nav-right {
  flex: 1;
  display: flex;
}
.nav-right {
  justify-content: flex-end;
}
.nav-left > .nav-item {
  padding-right: 12px;
}
.nav-right > .nav-item {
  padding-left: 12px;
}
#social-media a {
  font-family: -apple-system;
  color: #8B572A;
}
#social-media a:hover {
  color: #733F10;
}
</style><style type="text/css">
textarea {
  width: 100%;
  height: 400px;
}
.h1 {
  font-size: 24px;
}
</style><style type="text/css">
#app {
  /* max-width: 1080px; */
  margin: 0 auto;
}
#social-media {
  margin: 6px;
  float: right;
}

/* #header {
  margin: 80px auto;
  text-align: center;
  font-family: -apple-system, 'Helvetica Neue';
} */
#header h1 {
  font-size: 38px;
  color: #333333;
}
#header p {
  font-size: 22px;
  color: #A9A9A9;
  -webkit-font-smoothing: antialiased;
}
.divider {
  height: 1px;
  background-color: #E6E6E6;
}
#post-list {
  max-width: 700px;
  margin: 80px auto;
  padding: 0;
}
#post-list li {
  list-style: none;
}
.write-button-container {
  max-width: 700px;
  margin: 0 auto;
  margin-top: 80px;
  text-align: right;
}
.button {
  padding: 8px 16px;
  border: 1px solid rgba(0, 0, 0, .25);
  border-radius: 4px;
  text-decoration: none;
  color: rgba(0, 0, 0, .25);
  font-family: sans-serif;
  font-size: 14px;
}
.button:hover {
  border: 1px solid rgba(0, 0, 0, .45);
  color: rgba(0, 0, 0, .45);
}
</style><style type="text/css">
input, textarea {
  border: none;
}
textarea {
  height: 50px;
}
.title {
  font-size: 20px;
  font-weight: bold;
}
.post-list a:hover {
  text-decoration: underline;
}
.post-list .date, .post-list .category-and-tags {
  font-size: 12px;
  color: #9E9E9E;
}
.post-list .summary {
  font-size: 14px;
  line-height: 24px;
  color: #333;   
  overflow-wrap: break-word;
}
.post-list-divider {
    margin: 30px auto;
}
.operation {
  cursor: pointer;
}
</style><style type="text/css">
.coming-soon {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 44px;
    font-weight: bold;
}
</style><style type="text/css">
body[data-v-712cc44a] {
  margin: 0;
}
a[data-v-712cc44a] {
  text-decoration: none;
}
.container[data-v-712cc44a] {
  max-width: 700px;
  margin: 80px auto;
  padding: 0;
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  grid-column-gap: 10px;
  grid-row-gap: 10px;
}
.item-1[data-v-712cc44a] {
  grid-column-start: 1;
  grid-column-end: 7;
}
.item-2[data-v-712cc44a] {
  grid-column-start: 7;
  grid-column-end: 10;
}
.item-3[data-v-712cc44a] {
  grid-column-start: 10;
  grid-column-end: 13;
}
.item-4[data-v-712cc44a] {
  grid-column-start: 7;
  grid-column-end: 10;
}
.item-5[data-v-712cc44a] {
  grid-column-start: 10;
  grid-column-end: 13;
}
.item-6[data-v-712cc44a] {
  grid-column-start: 1;
  grid-column-end: 5;
}
.item-7[data-v-712cc44a] {
  grid-column-start: 5;
  grid-column-end: 9;
}
.item-8[data-v-712cc44a] {
  grid-column-start: 9;
  grid-column-end: 13;
}
</style><style type="text/css">
a[data-v-8fb1d0ca] {
  display: block;
  width: 100%;
}
.post-list[data-v-8fb1d0ca] {
  background: linear-gradient(to bottom right, #545454, #bdbdbd);
  height: 100%;
}
.post-list h1[data-v-8fb1d0ca] {
  font-size: 20px;
  font-weight: bold;
  letter-spacing: normal;
  margin: 0;
  color: white;
}
.post-list a[data-v-8fb1d0ca] {
  color: #333;
  text-decoration: none;
}
.post-list a[data-v-8fb1d0ca]:hover {
  text-decoration: underline;
}
.post-list .date[data-v-8fb1d0ca], .post-list .category-and-tags[data-v-8fb1d0ca] {
  font-size: 12px;
  color: #9E9E9E;
}
.post-list .abstract[data-v-8fb1d0ca] {
  font-size: 14px;
  line-height: 24px;
  color: white;
  overflow-wrap: break-word;
}
.post-list-divider[data-v-8fb1d0ca] {
  margin: 30px auto;
}
</style></head>
<body>
    <div id="app"><div id="nav"><div style="margin: auto;"><a href="/" class="router-link-active"><img height="26" id="logo" src="/logo.svg"></a></div></div> <div class="post-container view fade-enter fade-enter-active"><h1 class="entry-title">Develop a Hexo Theme with Gulp and Browsersync</h1> <div class="entry-meta">Apr 15, 2016 #Hexo #Gulp #Browsersync</div> <div class="content"><p><img src="/images/develop-a-hexo-theme-with-gulp-and-browsersync.png" alt="最终效果图"></p>
<p><a href="https://hexo.io">Hexo</a> is a fast, simple&amp;powerful blog framework. I have use Hexo for my personal blog for some time and recently I decide to {% post_link some-little-things-recently develop a theme for Hexo %}.</p>
<p><a href="https://www.browsersync.io">Browsersync</a> is a awesome testing tool for front-end developer. It will synchronize all your behavior on different browsers or devices and save us a lot of time. There is no doubt that I will use Browsersync for all front-end develop work. This time no except.</p>
<p>The basic of developing a Hexo theme is to create some ejs templates and stylus files. Hexo will generate the content dynamically convert ejs templates to html and stylus to css. You need to modify stylus files and open browser to see the style. The question is that Browsersync need static html and css files. Yes, Hexo has a command called <code>hexo generate</code> which could generate static html and css files to <code>public</code> directory. We don't want to call <code>hexo generate</code> every time we modify the stylus files because the process will waste a lot of time. At the same time we don't want to modify the static css file in <code>public</code> directory directly because we will lose the modification afte <code>hexo generate</code> is called again. What we really want is after we modify stylus files Browsersync just works.</p>
<p>How to realize that? The answer is <a href="http://gulpjs.com">Gulp</a>. Gulp is a front-end build system and Browsersync integrated with Gulp very well. The trick here is to use Gulp to generate and override the static css file every time we modify the stylus files. Talk is cheap. Let me show you the code.</p>
<p>Firstly install the dependencies:</p>
<pre><code class="lang-bash">npm install browser-sync gulp gulp-stylus --save-dev
</code></pre>
<p>Secondly create a file called <code>gulpfile.js</code> and add content below:</p>
<pre><code class="lang-javascript">var gulp        = require('gulp'),
    browserSync = require('browser-sync').create(),
    stylus      = require('gulp-stylus');

gulp.task('serve', function() {
    // tell Browsersync serve the static directory
    browserSync.init({
        server: {
            baseDir: "../../public"
        }
    });
    // once stylus file is modified perform `stylus` task
    gulp.watch("./source/css/**/*.styl", ['stylus']);
});

gulp.task('stylus', function () {
  return gulp.src('./source/css/style.styl') // tell gulp the source stylus file
    .pipe(stylus()) // compile stylus to css
    .pipe(gulp.dest('../../public/css')) // output new css file to override
    .pipe(browserSync.stream()); // inject new css file
});

gulp.task('default', ['serve']);
</code></pre>
<p>Last preform <code>gulp</code> directly under your theme's directory. The magic thus happened. Browsersync will open a new tab in the default browser for you. Once you modify the stylus file and save the change Browsersync will reload automatically on all devices connected to the url. By the way don't forget to perform <code>hexo generate</code> to generate static files in <code>public</code> directory before perform <code>gulp</code>.</p>
<p>Happy coding!</p>
</div> <input type="hidden" id="loaded-signal"></div> <p class="copyright">Copyright © 2017 MOVIER.ME - All Rights Reserved.</p></div>
  


</body></html>