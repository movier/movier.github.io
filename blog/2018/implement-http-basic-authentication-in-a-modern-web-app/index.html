<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Oliver Young</title>
  <link href="https://fonts.googleapis.com/css?family=Droid+Serif" rel="stylesheet">
  <link rel="stylesheet" href="/markdown.css">
<style type="text/css">
body {
  margin: 0;
}
#app {
  margin: 0 auto;
}
#social-media {
  margin: 6px;
  float: right;
}
#header {
  margin: 80px auto;
  text-align: center;
  font-family: -apple-system, 'Helvetica Neue';
}
#header h1 {
  font-size: 38px;
  color: #333333;
  font-weight: bold;
  letter-spacing: normal;
}
#header p {
  font-size: 22px;
  color: #A9A9A9;
  -webkit-font-smoothing: antialiased;
}
.divider {
  height: 1px;
  background-color: #E6E6E6;
}
#post-list {
  max-width: 700px;
  margin: 80px auto;
  padding: 0;
}
#post-list li {
  list-style: none;
}
</style><style type="text/css">
.post-list h1 {
  font-size: 20px;
  font-weight: bold;
  letter-spacing: normal;
  margin: 0;
}
.post-list a {
  color: #333;
  text-decoration: none;
}
.post-list a:hover {
  text-decoration: underline;
}
.post-list .date, .post-list .category-and-tags {
  font-size: 12px;
  color: #9E9E9E;
}
.post-list .summary {
  font-size: 14px;
  line-height: 24px;
  color: #333;   
  overflow-wrap: break-word;
}
.post-list-divider {
    margin: 30px auto;
}
</style><style type="text/css">
.entry-title, .entry-meta, .content {
    margin-left: auto;
    margin-right: auto;
    max-width: 700px;
    padding-left: 18px;
    padding-right: 18px;
}
.content {
  margin-top: 60px;
}
.entry-title {
  -webkit-font-smoothing: antialiased;
  margin-top: .42em;
  margin-bottom: .7em;
  letter-spacing: .02em;
  line-height: 1.1;
  color: white;
  font-size: 40px;
  font-weight: 800;
}
.entry-meta {
  font-size: 14px;
  color: rgba(0, 0, 0, .5);
  font-family: Helvetica Neue, sans-serif;
  font-weight: 500;
}
.content img {
  max-width: 100%;
  display: block;
  margin: auto;
}
pre {
  padding: 10px;
  overflow: auto;
  border: #E3EDF3 1px solid;
  background: #F7FAFB;
}
.banner {
  padding: 160px 0;
  text-align: center;
  background: linear-gradient(to bottom, #545454, #bdbdbd);
}
.content > p:first-child::first-letter {
    float:  left;
    font-size: 56px;
    line-height:  .83;
    padding-top: 3px;
    padding-right: 6px;
    font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
    font-weight: bold;
}
</style><style type="text/css">
#nav a {
  text-decoration: none;
}
#nav {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 55px;
  margin: 0 28px;
  display: flex;
  align-items: center;
  font-size: 13px;
  font-family: Helvetica, sans-serif;
  font-weight: bold;
  color: rgba(0, 0, 0, .48);
  border-bottom: 1px solid rgba(0, 0, 0, .05);
}
#nav::after {
  height: 1px;
  color: rgba(0, 0, 0, .05);
}
.nav-left, .nav-right {
  flex: 1;
  display: flex;
}
.nav-right {
  justify-content: flex-end;
}
.nav-left > .nav-item {
  padding-right: 12px;
}
.nav-right > .nav-item {
  padding-left: 12px;
}
#social-media a {
  font-family: -apple-system;
  color: #8B572A;
}
#social-media a:hover {
  color: #733F10;
}
</style><style type="text/css">
textarea {
  width: 100%;
  height: 400px;
}
.h1 {
  font-size: 24px;
}
</style><style type="text/css">
#app {
  /* max-width: 1080px; */
  margin: 0 auto;
}
#social-media {
  margin: 6px;
  float: right;
}
#header {
  margin: 80px auto;
  text-align: center;
  font-family: -apple-system, 'Helvetica Neue';
}
#header h1 {
  font-size: 38px;
  color: #333333;
}
#header p {
  font-size: 22px;
  color: #A9A9A9;
  -webkit-font-smoothing: antialiased;
}
.divider {
  height: 1px;
  background-color: #E6E6E6;
}
#post-list {
  max-width: 700px;
  margin: 80px auto;
  padding: 0;
}
#post-list li {
  list-style: none;
}
.write-button-container {
  max-width: 700px;
  margin: 0 auto;
  margin-top: 60px;
  text-align: right;
}
.button {
  padding: 8px 16px;
  border: 1px solid rgba(0, 0, 0, .25);
  border-radius: 4px;
  text-decoration: none;
  color: rgba(0, 0, 0, .25);
  font-family: sans-serif;
  font-size: 14px;
}
.button:hover {
  border: 1px solid rgba(0, 0, 0, .45);
  color: rgba(0, 0, 0, .45);
}
</style><style type="text/css">
input, textarea {
  border: none;
}
textarea {
  height: 50px;
}
.title {
  font-size: 20px;
  font-weight: bold;
}
.post-list a:hover {
  text-decoration: underline;
}
.post-list .date, .post-list .category-and-tags {
  font-size: 12px;
  color: #9E9E9E;
}
.post-list .summary {
  font-size: 14px;
  line-height: 24px;
  color: #333;   
  overflow-wrap: break-word;
}
.post-list-divider {
    margin: 30px auto;
}
.operation {
  cursor: pointer;
}
</style><style type="text/css">
.coming-soon {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 44px;
    font-weight: bold;
}
</style></head>
<body>
    <div id="app"><div id="nav"><div class="nav-left"><div class="nav-item"><a href="/blog" class="router-link-active">BLOG</a></div> <div class="nav-item"><a href="/projects" class="">PROJECTS</a></div></div> <div><a href="/" class="router-link-active"><img height="26" id="logo" src="/logo.svg"></a></div> <div class="nav-right"><div class="nav-item"><a href="/about" class="">ABOUT</a></div> <div class="nav-item"><a href="/hire-me" class="">HIRE ME</a></div></div></div> <div class="view fade-enter fade-enter-active"><div class="banner" style="background: linear-gradient(to right bottom, rgb(84, 84, 84), rgb(189, 189, 189));"><h1 class="entry-title">Implement HTTP Basic Authentication in a Modern Web App</h1> <div class="entry-meta">Apr 24, 2018 #Web</div></div> <div class="content"><p>User authentication could be complicated but sometimes we just need a simple solution. Then HTTP basic authentication will be a good choice.</p>
<p><img src="http://13.114.211.2/images/http-basic-authentication-password-prompt.jpg" alt="HTTP basic authentication password prompt in Chrome"></p>
<p>If a user visit a protected page HTTP basic authentication will present a password prompt like the one above. Only those with correct username and password have access to that page.</p>
<p>Next let's try to implement HTTP basic authentication in a modern web app.</p>
<h2 id="client">Client</h2>
<p>In HTTP basic authentication browsers need to send credentials. Though </p>
<blockquote>
<p> By default, in cross-site XMLHttpRequest or Fetch invocations, browsers will not send credentials.</p>
</blockquote>
<p>We could set a special flag on the request in order to realize our goal. How to set the flag depends on your method of async request. If you are using <code>Fetch</code> </p>
<pre><code class="lang-javascript">fetch(url, {
  credentials: 'include'
})
</code></pre>
<p>If you use other library please refer to the document on how to set credentials.</p>
<h2 id="server">Server</h2>
<p>If you enable CORS you may set header <code>Access-Control-Allow-Origin</code> as <code>*</code> to allow requests from any origin. If you want to use HTTP basic authentication you need to modify the value from <code>*</code> to the domain of your client. Another response header <code>Access-Control-Allow-Credentials</code> must be set as true.</p>
<pre><code>Access-Control-Allow-Origin: http://example.com
Access-Control-Allow-Credentials: true
</code></pre><p>All the things above are prerequisites for HTTP basic authentication. Its workflow looks like this: </p>
<p><img src="http://13.114.211.2/images/http-basic-authentication-workflow.jpg" alt="HTTP basic authentication workflow"></p>
<p>Detail explaination could be found on <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication#The_general_HTTP_authentication_framework">MDN</a>.</p>
<p>From the workflow we can find that after user enter a username and password a header called <code>Authorization</code> will be added to the new request automatically and its value is base64 encoded value of username and password.</p>
<p>After server receive the new request with <code>Authorization</code> header response could be determined by easily decoded username and password. If the username and password are wrong I will still make server reply with 401 Unauthorized so that the password prompt still present.</p>
<h2 id="last-but-not-least">Last but not least</h2>
<p>The method above works in Chrome but it doesn't work in Safari. Even in Chrome it seems HTTP basic authentication is getting less and less support beacuse in previous version after user is authorized the page will keep going but in the latest version user will be left in the async request after authorized.</p>
<p>Sooner or later HTTP basic authentication support will be removed completely from Chrome. At that time is there any simple solution of user authentication left for us?</p>
</div> <input type="hidden" id="loaded-signal"></div> <p class="copyright">Copyright Â© 2017 MOVIER.ME - All Rights Reserved.</p></div>
  


</body></html>